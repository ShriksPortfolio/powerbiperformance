<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Power BI Governance ‚Äî Hawk Eye View</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;450;500;600;700&family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #C4653A;
    --gold-light: rgba(196,101,58,0.15);
    --gold-bg: rgba(196,101,58,0.06);
    --navy: #2D2B28;
    --navy-light: #3D3A36;
    --dark: #2D2B28;
    --charcoal: #3D3A36;
    --slate: #6B6560;
    --light-grey: #FAF8F5;
    --border: #E8E5E1;
    --white: #FFFFFF;
    --success: #5B8C5A;
    --info: #7B8DA6;
    --warning: #C4883A;
    --danger: #C0392B;
    --teal: #5B8C5A;
    --cream: #FAF8F5;
    --cream-dark: #F1EDE8;
    --accent: #C4653A;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--cream);
    color: var(--dark);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  .header {
    background: var(--white);
    padding: 1.5rem 2.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
  }
  .header-left { display: flex; align-items: center; gap: 1.15rem; }
  .header-icon {
    width: 42px; height: 42px;
    background: var(--accent);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }
  .header-brand {
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--accent);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 0.2rem;
  }
  .header-author {
    font-size: 0.78rem;
    color: var(--slate);
    font-weight: 400;
    margin-bottom: 0.15rem;
  }
  .header-author strong {
    font-weight: 500;
    color: var(--dark);
  }
  .header-title {
    font-size: 0.88rem;
    color: var(--accent);
    font-weight: 500;
    letter-spacing: 0.01em;
  }
  .header-badge {
    background: rgba(196,101,58,0.08);
    border: 1px solid rgba(196,101,58,0.15);
    color: var(--accent);
    padding: 0.45rem 1.1rem;
    border-radius: 980px;
    font-size: 0.72rem;
    font-weight: 500;
    letter-spacing: 0.02em;
  }

  /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
  .main-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 2rem;
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: 2rem;
    align-items: start;
  }

  /* ‚îÄ‚îÄ NESTED ARCHITECTURE (LEFT) ‚îÄ‚îÄ */
  .architecture-panel {
    position: sticky;
    top: 2rem;
  }
  .arch-card {
    background: var(--white);
    border-radius: 12px;
    border: 1px solid var(--border);
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(45,43,40,0.04);
  }
  .arch-card-header {
    background: var(--cream-dark);
    color: var(--dark);
    padding: 0.85rem 1.25rem;
    font-weight: 600;
    font-size: 0.85rem;
    letter-spacing: 0.02em;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-bottom: 1px solid var(--border);
  }
  .arch-card-header .dot {
    width: 8px; height: 8px;
    background: var(--accent);
    border-radius: 50%;
  }

  .nest-container { padding: 1.25rem; }
  .nest-layer {
    border: 2px solid;
    border-radius: 10px;
    padding: 0.85rem;
    position: relative;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  .nest-layer:hover { transform: scale(1.005); }
  .nest-label {
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    padding: 0.15rem 0.6rem;
    border-radius: 4px;
    display: inline-block;
    margin-bottom: 0.6rem;
  }
  .nest-desc {
    font-size: 0.68rem;
    color: var(--slate);
    margin-bottom: 0.7rem;
    line-height: 1.5;
  }

  .layer-tenant { border-color: var(--dark); background: rgba(45,43,40,0.03); }
  .layer-tenant > .nest-label { background: var(--dark); color: var(--white); }

  .layer-governance { border-color: var(--slate); background: rgba(107,101,96,0.04); }
  .layer-governance > .nest-label { background: var(--slate); color: var(--white); }

  .layer-workspace { border-color: var(--info); background: rgba(123,141,166,0.06); }
  .layer-workspace > .nest-label { background: var(--info); color: var(--white); }

  .layer-reports { border-color: var(--accent); background: rgba(196,101,58,0.04); }
  .layer-reports > .nest-label { background: var(--accent); color: var(--white); }

  .layer-gateway { border-color: var(--success); background: rgba(91,140,90,0.04); }
  .layer-gateway > .nest-label { background: var(--success); color: var(--white); }

  .layer-data { border-color: var(--charcoal); background: rgba(61,58,54,0.04); }
  .layer-data > .nest-label { background: var(--charcoal); color: var(--white); }

  /* Layer click highlight */
  .nest-layer.active { box-shadow: 0 0 0 3px rgba(196,101,58,0.25); }

  /* Governance pillars */
  .pillars {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    margin-top: 1.25rem;
  }
  .pillar {
    text-align: center;
    padding: 0.6rem 0.35rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    border: 1px solid transparent;
  }
  .pillar:hover { transform: translateY(-2px); }
  .pillar.active { border-color: var(--accent); box-shadow: 0 2px 8px rgba(196,101,58,0.15); }
  .pillar-dot {
    width: 36px; height: 36px;
    border-radius: 50%;
    margin: 0 auto 0.4rem;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.85rem;
  }
  .pillar-label { font-size: 0.68rem; font-weight: 600; letter-spacing: 0.02em; }

  .p-processes .pillar-dot { background: var(--slate); color: white; }
  .p-training .pillar-dot { background: var(--dark); color: white; }
  .p-monitoring .pillar-dot { background: var(--accent); color: white; }
  .p-roles .pillar-dot { background: var(--success); color: white; }

  /* Source badges */
  .source-strip {
    margin-top: 1.25rem;
    padding: 0.85rem;
    background: var(--cream-dark);
    border-radius: 10px;
    border: 1px solid var(--border);
  }
  .source-strip-title {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--slate);
    margin-bottom: 0.5rem;
  }
  .source-link {
    display: block;
    font-size: 0.68rem;
    color: var(--accent);
    text-decoration: none;
    padding: 0.25rem 0;
    transition: color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    line-height: 1.5;
  }
  .source-link:hover { color: #8B4513; text-decoration: underline; }
  .source-link::before { content: '‚Ä∫ '; color: var(--accent); font-weight: 700; }

  /* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
  .detail-panel { min-width: 0; }

  /* Tab navigation */
  .tab-nav {
    display: flex;
    gap: 0.35rem;
    margin-bottom: 1.5rem;
    background: var(--cream-dark);
    padding: 0.35rem;
    border-radius: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(45,43,40,0.04);
    flex-wrap: wrap;
  }
  .tab-btn {
    padding: 0.55rem 1rem;
    border: none;
    background: transparent;
    border-radius: 980px;
    font-family: inherit;
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--slate);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    white-space: nowrap;
  }
  .tab-btn:hover { background: rgba(255,255,255,0.7); color: var(--dark); }
  .tab-btn.active {
    background: var(--white);
    color: var(--dark);
    font-weight: 600;
    box-shadow: 0 1px 4px rgba(45,43,40,0.06), 0 1px 2px rgba(45,43,40,0.04);
  }

  .tab-content { display: none; }
  .tab-content.active { display: block; }

  /* View toggle */
  .view-toggle {
    padding: 0.55em 1.3em;
    border: 1px solid var(--border);
    border-radius: 980px;
    background: var(--cream-dark);
    color: var(--slate);
    font-weight: 500;
    font-size: 0.82em;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    font-family: 'Inter', sans-serif;
  }
  .view-toggle:hover { background: var(--white); transform: translateY(-1px); }
  .view-toggle.active {
    background: var(--accent);
    color: var(--white);
    border-color: var(--accent);
    box-shadow: 0 2px 8px rgba(196,101,58,0.25);
  }

  /* Pyramid SVG layers */
  .pyramid-layer { transition: opacity 0.15s ease, filter 0.15s ease, stroke-width 0.15s ease; cursor: pointer; }
  .pyramid-layer:hover { opacity: 0.85; filter: brightness(1.15); }
  .pyramid-layer.active { stroke-width: 3; filter: brightness(1.1); opacity: 1; }

  /* Best practice detail panels ‚Äî instant with fade */
  .bp-detail {
    display: none;
    animation: bpFadeIn 0.15s ease-out;
  }
  .bp-detail.visible { display: block; }
  @keyframes bpFadeIn {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Grid cards */
  .grid-card {
    background: var(--white);
    border-radius: 12px;
    border: 1px solid rgba(45,43,40,0.06);
    overflow: hidden;
    margin-bottom: 1.5rem;
    box-shadow: 0 1px 3px rgba(45,43,40,0.04);
    transition: box-shadow 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  .grid-card:hover {
    box-shadow: 0 2px 8px rgba(45,43,40,0.06);
  }
  .grid-card-header {
    padding: 1.1rem 1.35rem;
    font-weight: 600;
    font-size: 0.88rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    border-bottom: 1px solid var(--border);
    color: var(--dark);
  }
  .grid-card-header .badge {
    font-size: 0.65rem;
    font-weight: 500;
    padding: 0.22rem 0.65rem;
    border-radius: 980px;
    letter-spacing: 0.02em;
  }
  .badge-navy { background: rgba(45,43,40,0.06); color: var(--dark); }
  .badge-gold { background: rgba(196,101,58,0.1); color: var(--accent); }
  .badge-teal { background: rgba(91,140,90,0.1); color: var(--success); }
  .badge-info { background: rgba(123,141,166,0.1); color: var(--info); }

  /* Tables */
  .gov-table { width: 100%; border-collapse: collapse; font-size: 0.78rem; }
  .gov-table thead { background: var(--cream-dark); }
  .gov-table th {
    padding: 0.75rem 1rem;
    text-align: left;
    color: var(--slate);
    font-weight: 600;
    font-size: 0.7rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    white-space: nowrap;
    border-bottom: 1px solid var(--border);
  }
  .gov-table td {
    padding: 0.7rem 1rem;
    border-bottom: 1px solid rgba(45,43,40,0.04);
    vertical-align: top;
    line-height: 1.6;
    color: #4A4842;
  }
  .gov-table tbody tr { transition: background 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); }
  .gov-table tbody tr:hover { background: rgba(196,101,58,0.03); }
  .gov-table tbody tr:last-child td { border-bottom: none; }

  /* Alternating row colours */
  .gov-table tbody tr:nth-child(even) { background: rgba(250,248,245,0.6); }
  .gov-table tbody tr:nth-child(even):hover { background: rgba(196,101,58,0.04); }

  /* Role badges in tables */
  .role-tag {
    display: inline-block;
    padding: 0.18rem 0.55rem;
    border-radius: 980px;
    font-size: 0.68rem;
    font-weight: 600;
    letter-spacing: 0.02em;
  }
  .role-global { background: #F2E0DF; color: #8B3A3A; }
  .role-fabric { background: #E2EFE2; color: #3D6B3D; }
  .role-platform { background: #DDE7F0; color: #3D5A7A; }
  .role-billing { background: #F5F0DC; color: #6B5520; }
  .role-license { background: #E8E0F2; color: #5A4380; }
  .role-user { background: #F2DDE5; color: #7A3D5A; }
  .role-capacity { background: #D8EDE8; color: #2D5A50; }
  .role-gateway { background: #F5E8D8; color: #6B4020; }
  .role-embedded { background: #D8ECF0; color: #1D6070; }

  .ws-admin { background: #C0392B; color: white; }
  .ws-member { background: #7B8DA6; color: white; }
  .ws-contributor { background: #5B8C5A; color: white; }
  .ws-viewer { background: #C4883A; color: white; }

  /* Check / cross marks */
  .check { color: var(--success); font-weight: 700; }
  .cross { color: #D5D0CB; }

  /* Security feature tags */
  .sec-tag {
    display: inline-block;
    padding: 0.18rem 0.5rem;
    border-radius: 980px;
    font-size: 0.68rem;
    font-weight: 500;
    margin: 0.1rem 0.15rem 0.1rem 0;
  }
  .sec-rls { background: #E2EFE2; color: #3D6B3D; }
  .sec-ols { background: #DDE7F0; color: #3D5A7A; }
  .sec-purview { background: #E8E0F2; color: #5A4380; }
  .sec-dlp { background: #F5E8D8; color: #6B4020; }
  .sec-sensitivity { background: #F2DDE5; color: #7A3D5A; }

  /* Governance pillar detail cards */
  .pillar-detail-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .pillar-card {
    background: var(--white);
    border-radius: 12px;
    border: 1px solid rgba(45,43,40,0.06);
    padding: 1.5rem;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  .pillar-card:hover { border-color: rgba(196,101,58,0.2); box-shadow: 0 4px 12px rgba(45,43,40,0.06); transform: translateY(-1px); }
  .pillar-card-icon {
    width: 40px; height: 40px;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem;
    margin-bottom: 0.75rem;
  }
  .pillar-card h3 { font-size: 0.85rem; font-weight: 600; margin-bottom: 0.35rem; }
  .pillar-card p { font-size: 0.75rem; color: var(--slate); line-height: 1.6; }
  .pillar-card ul {
    list-style: none; margin-top: 0.5rem; padding: 0;
  }
  .pillar-card li {
    font-size: 0.73rem;
    padding: 0.25rem 0;
    padding-left: 1rem;
    position: relative;
    color: var(--slate);
  }
  .pillar-card li::before {
    content: '‚Ä∫';
    position: absolute;
    left: 0;
    color: var(--accent);
    font-weight: 700;
  }

  /* Footer */
  .footer {
    margin-top: 1rem;
    padding: 1.5rem 2.5rem;
    background: var(--white);
    border-top: 1px solid var(--border);
    color: var(--slate);
    font-size: 0.72rem;
    text-align: center;
    line-height: 1.8;
  }
  .footer a { color: var(--accent); text-decoration: none; font-weight: 500; }
  .footer a:hover { text-decoration: underline; }

  /* Responsive */
  @media (max-width: 1100px) {
    .main-container { grid-template-columns: 1fr; }
    .architecture-panel { position: static; }
    .pillar-detail-grid { grid-template-columns: 1fr; }
  }

  /* Tooltip */
  .info-tip {
    display: inline-block;
    width: 16px; height: 16px;
    background: var(--cream-dark);
    color: var(--slate);
    border-radius: 50%;
    font-size: 0.6rem;
    text-align: center;
    line-height: 16px;
    cursor: help;
    margin-left: 0.3rem;
    font-weight: 700;
    position: relative;
    transition: background 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  .info-tip:hover { background: rgba(196,101,58,0.12); color: var(--accent); }
  .info-tip:hover::after {
    content: attr(data-tip);
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--dark);
    color: var(--white);
    padding: 0.6rem 0.85rem;
    border-radius: 8px;
    font-size: 0.68rem;
    font-weight: 400;
    white-space: nowrap;
    max-width: 280px;
    white-space: normal;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(45,43,40,0.15);
    line-height: 1.5;
  }

  /* Scroll anchor offset */
  [id] { scroll-margin-top: 1rem; }

  /* ‚ïê‚ïê‚ïê DATA SOURCE PLAYBOOKS ‚Äî Claude-refined aesthetic ‚ïê‚ïê‚ïê */

  .ds-layout {
    display: grid;
    grid-template-columns: 240px 1fr;
    gap: 2rem;
    min-height: 600px;
  }

  /* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
  .ds-sidebar {
    background: var(--white);
    border-radius: 16px;
    border: 1px solid rgba(45,43,40,0.06);
    padding: 1.25rem 0;
    position: sticky;
    top: 2rem;
    align-self: start;
  }
  .ds-sidebar-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #9B9B8E;
    padding: 0.35rem 1.35rem 0.85rem;
  }
  .ds-nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.65rem 1.35rem;
    cursor: pointer;
    font-size: 0.82rem;
    font-weight: 450;
    color: #6B6B60;
    transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
    border-left: 3px solid transparent;
    margin: 0 0.35rem;
    border-radius: 0 10px 10px 0;
  }
  .ds-nav-item:hover {
    background: rgba(196,101,58,0.04);
    color: var(--dark);
  }
  .ds-nav-item.active {
    background: rgba(196,101,58,0.06);
    color: #2D2B28;
    font-weight: 600;
    border-left-color: var(--accent);
  }
  .ds-nav-icon {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.88rem;
    flex-shrink: 0;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .ds-nav-item.active .ds-nav-icon {
    transform: scale(1.05);
    box-shadow: 0 3px 10px rgba(45,43,40,0.12);
  }
  .ds-nav-coming {
    font-size: 0.58rem;
    background: rgba(0,0,0,0.04);
    color: #A0A090;
    padding: 0.15rem 0.5rem;
    border-radius: 6px;
    font-weight: 500;
    margin-left: auto;
    letter-spacing: 0.03em;
  }
  .ds-nav-divider {
    height: 1px;
    background: rgba(0,0,0,0.05);
    margin: 0.65rem 1.5rem;
  }

  /* ‚îÄ‚îÄ Sub-tabs ‚îÄ‚îÄ */
  .ds-subtabs {
    display: flex;
    gap: 0.4rem;
    margin-bottom: 1.5rem;
    background: #F5F5F0;
    padding: 0.3rem;
    border-radius: 12px;
  }
  .ds-subtab {
    padding: 0.6rem 1.2rem;
    border: none;
    background: transparent;
    border-radius: 9px;
    font-family: inherit;
    font-size: 0.8rem;
    font-weight: 500;
    color: #7A7A6E;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4,0,0.2,1);
    display: flex;
    align-items: center;
    gap: 0.45rem;
  }
  .ds-subtab:hover {
    color: var(--dark);
    background: rgba(255,255,255,0.7);
  }
  .ds-subtab.active {
    background: #FFFFFF;
    color: #2D2B28;
    font-weight: 600;
    box-shadow: 0 1px 4px rgba(45,43,40,0.07), 0 1px 2px rgba(45,43,40,0.04);
  }
  .ds-subtab-icon { font-size: 0.9rem; }

  /* ‚îÄ‚îÄ Content panels ‚îÄ‚îÄ */
  .ds-content-panel { display: none; }
  .ds-content-panel.active { display: block; }
  .ds-source-panel { display: none; }
  .ds-source-panel.active { display: block; }

  /* ‚îÄ‚îÄ DS table overrides for warm aesthetic ‚îÄ‚îÄ */
  .ds-source-panel .grid-card {
    border: 1px solid rgba(45,43,40,0.06);
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(45,43,40,0.03);
  }
  .ds-source-panel .grid-card-header {
    background: var(--white);
    border-bottom: 1px solid rgba(45,43,40,0.06);
    color: var(--dark);
    font-size: 0.86rem;
  }
  .ds-source-panel .gov-table thead {
    background: var(--cream-dark);
  }
  .ds-source-panel .gov-table th {
    color: var(--slate);
    font-size: 0.7rem;
    letter-spacing: 0.05em;
    font-weight: 600;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(45,43,40,0.06);
  }
  .ds-source-panel .gov-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(45,43,40,0.04);
    font-size: 0.78rem;
    color: #4A4842;
    line-height: 1.6;
  }
  .ds-source-panel .gov-table tbody tr {
    transition: background 0.2s ease;
  }
  .ds-source-panel .gov-table tbody tr:hover {
    background: rgba(196,101,58,0.03);
  }
  .ds-source-panel .gov-table tbody tr:nth-child(even) {
    background: rgba(250,248,245,0.6);
  }
  .ds-source-panel .gov-table tbody tr:nth-child(even):hover {
    background: rgba(196,101,58,0.04);
  }
  .ds-source-panel .gov-table td:first-child {
    color: var(--accent);
    font-weight: 600;
    font-size: 0.76rem;
  }
  .ds-source-panel .gov-table td strong {
    color: #2D2D28;
    font-weight: 600;
  }

  /* ‚îÄ‚îÄ Priority badges ‚Äî warm, refined ‚îÄ‚îÄ */
  .priority-high {
    background: #EEF4ED;
    color: #5B8C5A;
    padding: 0.22rem 0.65rem;
    border-radius: 980px;
    font-weight: 600;
    font-size: 0.65rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }
  .priority-mid {
    background: #FDF3E7;
    color: #C4883A;
    padding: 0.22rem 0.65rem;
    border-radius: 980px;
    font-weight: 600;
    font-size: 0.65rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }
  .priority-low {
    background: #F0ECE8;
    color: #8B8580;
    padding: 0.22rem 0.65rem;
    border-radius: 980px;
    font-weight: 600;
    font-size: 0.65rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
  }

  /* ‚îÄ‚îÄ Source links ‚Äî understated ‚îÄ‚îÄ */
  .ds-source-link {
    color: var(--accent);
    text-decoration: none;
    font-size: 0.72rem;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    border-bottom: 1px solid transparent;
  }
  .ds-source-link:hover {
    color: #8B4513;
    border-bottom-color: var(--accent);
    text-decoration: none;
  }

  /* ‚îÄ‚îÄ Source header card ‚Äî warm, spacious ‚îÄ‚îÄ */
  .ds-source-header {
    background: var(--white);
    border-radius: 16px;
    border: 1px solid rgba(45,43,40,0.06);
    padding: 1.5rem 1.75rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1.15rem;
  }
  .ds-source-header-icon {
    width: 50px;
    height: 50px;
    border-radius: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(45,43,40,0.1);
  }
  .ds-source-header h2 {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 0.2rem;
    letter-spacing: -0.02em;
  }
  .ds-source-header p {
    font-size: 0.8rem;
    color: #7A7A6E;
    line-height: 1.55;
  }
  .ds-item-count {
    margin-left: auto;
    text-align: center;
    background: rgba(196,101,58,0.06);
    padding: 0.65rem 1rem;
    border-radius: 12px;
  }
  .ds-item-count .num {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--accent);
    line-height: 1;
    font-family: 'Fraunces', serif;
  }
  .ds-item-count .lbl {
    font-size: 0.62rem;
    color: #9B9B8E;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-top: 0.15rem;
  }

  @media (max-width: 1100px) {
    .ds-layout { grid-template-columns: 1fr; }
    .ds-sidebar { position: static; }
  }

</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê -->
<header class="header">
  <div class="header-left">
    <div class="header-icon">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="2" width="6" height="20" rx="1.5" fill="white" opacity="0.9"/>
        <rect x="11" y="6" width="5" height="16" rx="1.5" fill="white" opacity="0.7"/>
        <rect x="18" y="10" width="4" height="12" rx="1" fill="white" opacity="0.5"/>
      </svg>
    </div>
    <div>
      <div class="header-brand">Power BI Governance</div>
      <div class="header-author">Content Author: <strong>By Shrikesh Pattni</strong> | Lead Architect</div>
      <div class="header-title">Power BI Accelerator: Data Analytics Governance Playbook</div>
    </div>
  </div>
  <div class="header-badge">All sources validated against Microsoft Learn</div>
</header>

<!-- ‚ïê‚ïê‚ïê MAIN GRID ‚ïê‚ïê‚ïê -->
<div class="main-container">

  <!-- ‚îÄ‚îÄ LEFT: ARCHITECTURE DIAGRAM ‚îÄ‚îÄ -->
  <aside class="architecture-panel">
    <div class="arch-card">
      <div class="arch-card-header">
        <span class="dot"></span> Power BI: Hawk Eye View ‚Äî Nested Architecture
      </div>
      <div class="nest-container">

        <!-- L1: Office 365 / Entra ID -->
        <div class="nest-layer layer-tenant" data-tab="tab-tenant" onclick="activateLayer(this, 'tab-tenant')">
          <span class="nest-label">Microsoft 365 &amp; Entra ID</span>
          <div class="nest-desc">Tenant-level identity, licensing &amp; security boundary</div>

          <!-- L2: Tenant Governance -->
          <div class="nest-layer layer-governance" data-tab="tab-governance" onclick="activateLayer(this, 'tab-governance'); event.stopPropagation();">
            <span class="nest-label">Tenant Governance &amp; Admin Portal</span>
            <div class="nest-desc">Fabric Admin Portal ¬∑ Tenant settings ¬∑ Audit logs ¬∑ Usage metrics</div>

            <!-- L3: Workspaces -->
            <div class="nest-layer layer-workspace" data-tab="tab-workspace" onclick="activateLayer(this, 'tab-workspace'); event.stopPropagation();">
              <span class="nest-label">Workspaces</span>
              <div class="nest-desc">Collaborative containers: Admin ¬∑ Member ¬∑ Contributor ¬∑ Viewer roles</div>

              <!-- L4: Reports / Semantic Models -->
              <div class="nest-layer layer-reports" data-tab="tab-security" onclick="activateLayer(this, 'tab-security'); event.stopPropagation();">
                <span class="nest-label">Reports &amp; Semantic Models</span>
                <div class="nest-desc">RLS ¬∑ OLS ¬∑ Sensitivity labels ¬∑ Certified datasets</div>

                <!-- L5: Gateway -->
                <div class="nest-layer layer-gateway" data-tab="tab-lifecycle" onclick="activateLayer(this, 'tab-lifecycle'); event.stopPropagation();">
                  <span class="nest-label">On-Premises Gateway</span>
                  <div class="nest-desc">Secure bridge to on-prem data sources</div>

                  <!-- L6: Data -->
                  <div class="nest-layer layer-data" onclick="event.stopPropagation();">
                    <span class="nest-label">Data Sources</span>
                    <div class="nest-desc">SQL Server ¬∑ Azure ¬∑ Databricks ¬∑ APIs ¬∑ Excel ¬∑ Flat files</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Governance Pillars -->
      <div style="padding: 0 1.25rem 1.25rem;">
        <div style="font-size:0.68rem; font-weight:600; text-transform:uppercase; letter-spacing:0.08em; color:var(--slate); margin-bottom:0.5rem;">Governance Pillars</div>
        <div class="pillars">
          <div class="pillar p-processes" onclick="activateTab('tab-governance')">
            <div class="pillar-dot">‚öô</div>
            <div class="pillar-label">Processes</div>
          </div>
          <div class="pillar p-training" onclick="activateTab('tab-governance')">
            <div class="pillar-dot">üìñ</div>
            <div class="pillar-label">Training</div>
          </div>
          <div class="pillar p-monitoring" onclick="activateTab('tab-lifecycle')">
            <div class="pillar-dot">üìä</div>
            <div class="pillar-label">Monitoring</div>
          </div>
          <div class="pillar p-roles" onclick="activateTab('tab-tenant')">
            <div class="pillar-dot">üë§</div>
            <div class="pillar-label">Roles</div>
          </div>
        </div>
      </div>

      <!-- Source references -->
      <div style="padding: 0 1.25rem 1.25rem;">
        <div class="source-strip">
          <div class="source-strip-title">Microsoft Official Sources</div>
          <a class="source-link" href="https://learn.microsoft.com/en-us/fabric/admin/roles" target="_blank" rel="noopener">Fabric Admin Roles</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/collaborate-share/service-roles-new-workspaces" target="_blank" rel="noopener">Workspace Roles in Power BI</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-tenant-administration" target="_blank" rel="noopener">Tenant Administration Planning</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning" target="_blank" rel="noopener">Tenant-Level Security Planning</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/fabric-adoption-roadmap-governance" target="_blank" rel="noopener">Fabric Adoption Roadmap: Governance</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/fabric/security/service-admin-row-level-security" target="_blank" rel="noopener">Row-Level Security (RLS)</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/fabric/fundamentals/roles-workspaces" target="_blank" rel="noopener">Workspace Roles in Fabric</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-content-lifecycle-management-validate" target="_blank" rel="noopener">Validate Content (Microsoft Learn)</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning" target="_blank" rel="noopener">Security Groups Strategy</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/rest/api/power-bi/admin" target="_blank" rel="noopener">Power BI Admin REST API Reference</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/fabric/governance/metadata-scanning-overview" target="_blank" rel="noopener">Metadata Scanning Overview</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/fabric/admin/metadata-scanning-setup" target="_blank" rel="noopener">Metadata Scanning Setup</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-auditing-monitoring-tenant-level-auditing" target="_blank" rel="noopener">Tenant-Level Auditing</a>
          <a class="source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/admin-activity-log" target="_blank" rel="noopener">Activity Log Access</a>
        </div>
      </div>
    </div>
  </aside>

  <!-- ‚îÄ‚îÄ RIGHT: DETAIL PANELS ‚îÄ‚îÄ -->
  <div class="detail-panel">

    <!-- View Toggle -->
    <div style="display:flex; gap:0.5em; margin-bottom:0.75em;">
      <button class="view-toggle active" onclick="switchView('governance')">üèõ Governance View</button>
      <button class="view-toggle" onclick="switchView('bestpractices')">üî∫ Enterprise Best Practices</button>
      <button class="view-toggle" onclick="switchView('datasources')">üîå Data Source Playbooks</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW 1: GOVERNANCE (existing tabs)         -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="view-governance">

    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button class="tab-btn active" onclick="activateTab('tab-tenant')">Tenant Admin Roles</button>
      <button class="tab-btn" onclick="activateTab('tab-workspace')">Workspace Roles</button>
      <button class="tab-btn" onclick="activateTab('tab-security')">Data Security</button>
      <button class="tab-btn" onclick="activateTab('tab-unittesting')">Semantic Model Unit Testing</button>
      <button class="tab-btn" onclick="activateTab('tab-governance')">Governance Framework</button>
      <button class="tab-btn" onclick="activateTab('tab-lifecycle')">Monitoring &amp; Lifecycle</button>
      <button class="tab-btn" onclick="activateTab('tab-entra')">Entra ID &amp; Security Groups</button>
      <button class="tab-btn" onclick="activateTab('tab-api')">REST API &amp; Admin APIs</button>
      <button class="tab-btn" onclick="activateTab('tab-metadata')">Metadata Extraction Process</button>
    </nav>

    <!-- ‚ïê‚ïê‚ïê TAB 1: TENANT ADMIN ROLES ‚ïê‚ïê‚ïê -->
    <div id="tab-tenant" class="tab-content active">

      <div class="grid-card">
        <div class="grid-card-header">
          Administrator Roles Related to Power BI / Fabric
          <span class="badge badge-navy">Microsoft 365 &amp; Entra ID</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Role</th>
              <th>Administrative Scope</th>
              <th>Key Tasks &amp; Permissions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="role-tag role-global">Global Administrator</span></td>
              <td>Microsoft 365 (entire tenant)</td>
              <td>Unlimited access to all management features for the organisation. Can assign all other admin roles. Full control over users, groups, subscriptions, and all services including Power BI.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-billing">Billing Administrator</span></td>
              <td>Microsoft 365</td>
              <td>Manage subscriptions, view and manage billing, purchase licences. No direct Power BI content access.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-license">Licence Administrator</span></td>
              <td>Microsoft 365</td>
              <td>Assign or remove licences for users (Pro, PPU, Free). Manage licence allocation across the tenant.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-user">User Administrator</span></td>
              <td>Microsoft 365</td>
              <td>Create and manage users and groups. Reset passwords. Manage support tickets. Key for automation of user provisioning.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-platform">Power Platform Administrator</span></td>
              <td>Power Platform (incl. Power BI)</td>
              <td>Full access to Power BI management tasks. Enable/disable Fabric features via tenant settings. Report on usage and performance. Review and manage auditing. Manage environments.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-fabric">Fabric Administrator</span><span class="info-tip" data-tip="Previously named 'Power BI Service Administrator'. Renamed when Power BI was consolidated into Microsoft Fabric.">?</span></td>
              <td>Power BI / Fabric Service</td>
              <td>All same permissions as Power Platform Administrator for Power BI. Manage tenant settings, workspace access, audit logs, usage metrics. Cannot manage licensing (requires M365 admin). Recommended: 2‚Äì4 per organisation.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-capacity">Premium / Fabric Capacity Administrator</span></td>
              <td>A single Premium or Fabric capacity</td>
              <td>Assign workspaces to the capacity. Manage user permissions on the capacity. Manage workloads to configure memory usage. Restart the capacity.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-embedded">Embedded Capacity Administrator</span></td>
              <td>Single Embedded Capacity</td>
              <td>All same permissions as Premium Capacity Administrator but scoped to a single Power BI Embedded (A SKU) capacity.</td>
            </tr>
            <tr>
              <td><span class="role-tag role-gateway">Gateway Administrator</span></td>
              <td>Power BI Gateway</td>
              <td>Manages user access and connections from on-premises data sources to the Power BI Service. Configures data source credentials and scheduling.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Fabric Admin Portal ‚Äî Key Capabilities
          <span class="badge badge-gold">Admin Portal</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Area</th>
              <th>What It Controls</th>
              <th>Governance Impact</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Tenant Settings</strong></td>
              <td>Enable/disable features per security group or entire org (e.g., export data, share externally, publish to web)</td>
              <td>Core governance lever ‚Äî controls what users can and cannot do at scale</td>
            </tr>
            <tr>
              <td><strong>Usage Metrics</strong></td>
              <td>View adoption, active users, report views, dataset refreshes</td>
              <td>Measures platform adoption and identifies underused content for cleanup</td>
            </tr>
            <tr>
              <td><strong>Audit Logs</strong></td>
              <td>Track all user actions: sharing, exporting, viewing, publishing</td>
              <td>Compliance and security monitoring. Essential for regulated industries.</td>
            </tr>
            <tr>
              <td><strong>Capacity Settings</strong></td>
              <td>Manage Premium / Fabric capacities, workload allocation, auto-scale</td>
              <td>Performance governance ‚Äî ensures fair resource distribution</td>
            </tr>
            <tr>
              <td><strong>Workspace Management</strong></td>
              <td>View all workspaces, reassign admins, recover orphaned workspaces</td>
              <td>Prevents workspace sprawl and ensures continuity when staff leave</td>
            </tr>
            <tr>
              <td><strong>Embed Codes</strong></td>
              <td>Manage "Publish to Web" embed codes</td>
              <td>Prevents accidental public exposure of sensitive data</td>
            </tr>
            <tr>
              <td><strong>Domains</strong></td>
              <td>Group workspaces into logical domains (e.g., Finance, HR)</td>
              <td>Enables federated governance with domain-level administrators</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 2: WORKSPACE ROLES ‚ïê‚ïê‚ïê -->
    <div id="tab-workspace" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Power BI / Fabric Workspace Roles ‚Äî Permissions Matrix
          <span class="badge badge-info">Workspace Level</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Capability</th>
              <th><span class="role-tag ws-admin">Admin</span></th>
              <th><span class="role-tag ws-member">Member</span></th>
              <th><span class="role-tag ws-contributor">Contributor</span></th>
              <th><span class="role-tag ws-viewer">Viewer</span></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Update and delete the workspace</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Add / remove users (including admins)</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Add members with lower permissions</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Publish, update, and change permissions for an app</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Allow contributors to update the app (setting)</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td>If allowed</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Share items or share an app</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Create, edit, and delete content (reports, datasets)</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Publish reports to the workspace</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Create metrics based on a dataset in the workspace</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Schedule data refreshes via the on-premises gateway</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>Modify gateway connection settings</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>View and interact with reports, dashboards</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
            </tr>
            <tr>
              <td>Read data stored in workspace dataflows</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
            </tr>
            <tr>
              <td>Copy a report</td>
              <td class="check">‚úì</td>
              <td class="check">‚úì</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
            </tr>
            <tr>
              <td>RLS enforced on data</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
              <td class="cross">‚úó</td>
              <td class="check">‚úì</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Workspace Roles ‚Äî Key Considerations
          <span class="badge badge-navy">Best Practice</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Consideration</th>
              <th>Detail</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Licensing</strong></td>
              <td>Admin, Member, and Contributor roles require Power BI Pro or PPU. Viewers can access content without Pro only if the workspace is in Premium/Fabric capacity.</td>
            </tr>
            <tr>
              <td><strong>Orphaned Workspaces</strong></td>
              <td>A workspace without an Admin is "orphaned". Always ensure at least 2 Admins per workspace. Fabric Admins can recover orphaned workspaces via the Admin Portal.</td>
            </tr>
            <tr>
              <td><strong>RLS Behaviour</strong></td>
              <td>Row-Level Security (RLS) only applies to users with the Viewer role. Admins, Members, and Contributors bypass RLS ‚Äî they have edit permissions on the semantic model.</td>
            </tr>
            <tr>
              <td><strong>Group Assignment</strong></td>
              <td>For governed content, assign security groups (not individuals) to workspace roles. If a user is in multiple groups, the highest permission level applies.</td>
            </tr>
            <tr>
              <td><strong>Principle of Least Privilege</strong></td>
              <td>Assign the lowest role necessary. Most report consumers should be Viewers. Content creators should be Contributors. Only workspace owners should be Admins.</td>
            </tr>
            <tr>
              <td><strong>Maximum Workspaces</strong></td>
              <td>A Pro user can be a member of a maximum of 1,000 workspaces.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 3: DATA SECURITY ‚ïê‚ïê‚ïê -->
    <div id="tab-security" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Power BI Data Security Features
          <span class="badge badge-teal">Security Layer</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th>Scope</th>
              <th>Description</th>
              <th>Where Configured</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="sec-tag sec-rls">RLS</span> Row-Level Security</td>
              <td>Data rows</td>
              <td>Restricts data visibility by user role using DAX filter expressions. Only enforced for users with the Viewer workspace role. Admins/Members/Contributors bypass RLS.</td>
              <td>Power BI Desktop (define roles &amp; rules) ‚Üí Power BI Service (assign members)</td>
            </tr>
            <tr>
              <td><span class="sec-tag sec-ols">OLS</span> Object-Level Security</td>
              <td>Tables &amp; columns</td>
              <td>Hides specific tables or columns from users. Users who cannot see an object will not see it in field lists or visuals.</td>
              <td>Tabular Editor / SSMS / Power BI Desktop</td>
            </tr>
            <tr>
              <td><span class="sec-tag sec-sensitivity">Sensitivity Labels</span></td>
              <td>Content items</td>
              <td>Microsoft Information Protection labels (e.g., Confidential, Internal, Public) applied to reports, datasets, dashboards. Labels persist when data is exported.</td>
              <td>Power BI Service ¬∑ Microsoft Purview</td>
            </tr>
            <tr>
              <td><span class="sec-tag sec-dlp">DLP Policies</span></td>
              <td>Tenant / workspace</td>
              <td>Data Loss Prevention policies detect sensitive data in semantic models and apply protective actions (e.g., restrict external sharing).</td>
              <td>Microsoft Purview Compliance Portal</td>
            </tr>
            <tr>
              <td><span class="sec-tag sec-purview">Microsoft Purview</span></td>
              <td>Entire data estate</td>
              <td>Unified governance across Azure, Power BI, and on-premises. Provides data lineage, classification, and sensitivity labelling at scale.</td>
              <td>Microsoft Purview Portal</td>
            </tr>
            <tr>
              <td><strong>BYOK</strong> (Bring Your Own Key)</td>
              <td>Tenant</td>
              <td>Encrypt Power BI data at rest using your own Azure Key Vault keys (RSA 4096-bit). Requires Premium capacity.</td>
              <td>PowerShell ¬∑ Azure Key Vault</td>
            </tr>
            <tr>
              <td><strong>Private Links</strong></td>
              <td>Network</td>
              <td>Azure Private Link enables inbound security via private endpoints, ensuring Power BI traffic stays on the Microsoft backbone network.</td>
              <td>Azure Portal ¬∑ Fabric Tenant Settings</td>
            </tr>
            <tr>
              <td><strong>VNet Gateway</strong></td>
              <td>Network</td>
              <td>Microsoft-managed virtual network gateway for enhanced outbound security to data sources. Eliminates need for on-premises gateway management.</td>
              <td>Azure Portal ¬∑ Fabric Admin Portal</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          RLS Behaviour by Workspace Role
          <span class="badge badge-gold">Critical Understanding</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Workspace Role</th>
              <th>RLS Enforced?</th>
              <th>Reason</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="role-tag ws-admin">Admin</span></td>
              <td><span style="color:var(--danger); font-weight:600;">No</span></td>
              <td>Has edit permission on the semantic model ‚Äî RLS is bypassed</td>
            </tr>
            <tr>
              <td><span class="role-tag ws-member">Member</span></td>
              <td><span style="color:var(--danger); font-weight:600;">No</span></td>
              <td>Has edit permission on the semantic model ‚Äî RLS is bypassed</td>
            </tr>
            <tr>
              <td><span class="role-tag ws-contributor">Contributor</span></td>
              <td><span style="color:var(--danger); font-weight:600;">No</span></td>
              <td>Has edit permission on the semantic model ‚Äî RLS is bypassed</td>
            </tr>
            <tr>
              <td><span class="role-tag ws-viewer">Viewer</span></td>
              <td><span style="color:var(--success); font-weight:600;">Yes ‚úì</span></td>
              <td>Read-only access ‚Äî RLS filters are applied to restrict data rows</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB: SEMANTIC MODEL UNIT TESTING ‚ïê‚ïê‚ïê -->
    <div id="tab-unittesting" class="tab-content">

      <!-- BUSINESS CASE -->
      <div class="grid-card">
        <div class="grid-card-header">
          Why Unit Test Semantic Models? ‚Äî Business Case
          <span class="badge badge-gold">Foundation Quality</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:25%;">Risk Without Testing</th>
              <th style="width:40%;">What Goes Wrong</th>
              <th style="width:35%;">Business Impact</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Silent wrong numbers</strong></td>
              <td>A DAX measure returns incorrect totals under specific filter combinations. The report looks fine at the top level ‚Äî it's only wrong when the business drills down or exports to Excel.</td>
              <td>Executive decisions based on inaccurate figures. Erodes trust in the entire analytics platform. Recovery cost is exponentially higher the later it's caught.</td>
            </tr>
            <tr>
              <td><strong>Referential integrity violations</strong></td>
              <td>Orphaned foreign keys in the fact table (e.g., a SegmentID of -1) produce <code>(Blank)</code> rows in visuals. Users see unexplained blanks in slicers and matrices.</td>
              <td>Perceived data quality failures. Users revert to Excel workarounds. Adoption stalls because "the numbers don't match".</td>
            </tr>
            <tr>
              <td><strong>Model regression after change</strong></td>
              <td>A developer adds a new dimension, changes a relationship, or modifies a measure. Existing reports silently break ‚Äî totals shift, filters stop propagating, or (Blank) rows appear.</td>
              <td>Change becomes feared rather than embraced. Teams avoid model improvements. Technical debt accumulates. CI/CD adoption is blocked.</td>
            </tr>
            <tr>
              <td><strong>Export-to-Excel mismatch</strong></td>
              <td>Totals shown in Power BI visuals don't match the totals when the same table is exported. Caused by context transition issues, implicit measures, or visual-level filters not captured in export.</td>
              <td>Finance teams lose confidence. Reconciliation becomes a manual monthly exercise. Audit risk in regulated industries (financial services, insurance).</td>
            </tr>
            <tr>
              <td><strong>RLS bypass or data leakage</strong></td>
              <td>A role filter is misconfigured. An Admin/Member/Contributor sees unfiltered data (by design), but a user is accidentally assigned a role that grants broader access than intended.</td>
              <td>Regulatory breach (GDPR, FCA). Sensitive data exposed to unauthorised users. Potential fines and reputational damage.</td>
            </tr>
            <tr>
              <td><strong>Refresh failures in production</strong></td>
              <td>A schema change in the upstream data source breaks the Power Query refresh. The dataset serves stale data, sometimes for days, before anyone notices.</td>
              <td>Business operates on outdated data. Scheduled refresh failures cascade into missed SLAs. Operations team firefighting instead of building.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- TEST CATEGORIES -->
      <div class="grid-card">
        <div class="grid-card-header">
          Unit Test Categories ‚Äî What to Test in a Semantic Model
          <span class="badge badge-teal">Test Framework</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:5%;">ID</th>
              <th style="width:13%;">Test Type</th>
              <th style="width:32%;">What It Validates</th>
              <th style="width:30%;">Example Tests</th>
              <th style="width:20%;">Tools</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td><strong>Structure</strong></td>
              <td>Row counts, unique value counts in dimension tables, expected schema shape. Confirms the model loaded what was expected.</td>
              <td>FactSales row count = 69,300; DimSegment unique values = 6; DimProductGroup unique values = 6; DimMetrics unique values = 23</td>
              <td>DAX Query View, DAX Studio, Fabric Notebooks</td>
            </tr>
            <tr>
              <td>2</td>
              <td><strong>Relationships</strong></td>
              <td>Referential integrity between fact and dimension tables. Identifies orphaned foreign keys that produce <code>(Blank)</code> rows.</td>
              <td>FactSales with Invalid SegmentID = 0; FactSales with Invalid ProductGroupID = 0; FactSales with Invalid UnitID = 0</td>
              <td>DAX Query View, DAX Studio, Tabular Editor (VertiPaq Analyzer)</td>
            </tr>
            <tr>
              <td>3</td>
              <td><strong>Data Quality</strong></td>
              <td>NULL values, negative values, dates outside expected range, blank primary keys. Catches upstream data issues before they reach reports.</td>
              <td>FactSales with NULL Actual M = 0; FactSales with Negative Actual M = 9,430; FactSales with Date Not in Date Table = 0</td>
              <td>DAX Query View, Power Query Diagnostics, Great Expectations (via Semantic Link)</td>
            </tr>
            <tr>
              <td>4</td>
              <td><strong>Measure Accuracy</strong></td>
              <td>DAX measures return expected values for known filter contexts. Compares against manually validated baselines. Tests both detail and total rows.</td>
              <td>Total Sales 2024 = ¬£5,842,485; Avg Sales per Transaction (Q3 2024) = ¬£1,720; YTD vs baseline ¬± 0.01</td>
              <td>DAX Query View, DAX Studio (EVALUATE + UNION pattern), Azure Pipelines</td>
            </tr>
            <tr>
              <td>5</td>
              <td><strong>Total Consistency</strong></td>
              <td>Visual totals match exported totals. Grand totals in a matrix match the sum of the visible rows. Critical for finance and audit scenarios.</td>
              <td>Matrix grand total = SUM of visible rows for [Revenue]; Export-to-Excel total matches visual total ¬± 0</td>
              <td>DAX Query View (compare with/without ALL), Performance Analyzer, Manual spot check</td>
            </tr>
            <tr>
              <td>6</td>
              <td><strong>Security (RLS/OLS)</strong></td>
              <td>Row-Level Security and Object-Level Security roles filter correctly. No data leakage. Dynamic rules (USERNAME, USERPRINCIPALNAME) return correct scopes.</td>
              <td>"View As" role: UK Region ‚Üí only UK data visible; Dynamic RLS: test with expected and unexpected usernames; OLS: hidden columns not accessible</td>
              <td>Power BI Desktop "View As", DAX Query View (with CALCULATE + RLS role), Tabular Editor</td>
            </tr>
            <tr>
              <td>7</td>
              <td><strong>Performance</strong></td>
              <td>DAX query execution time against benchmarks. Identifies slow measures before they impact user experience.</td>
              <td>Page load &lt; 3 seconds; Most expensive measure &lt; 500ms; No storage engine callbacks &gt; 100</td>
              <td>DAX Studio (Server Timings), Performance Analyzer, Fabric Capacity Metrics App</td>
            </tr>
            <tr>
              <td>8</td>
              <td><strong>Best Practice (BPA)</strong></td>
              <td>Model structure conforms to naming conventions, no implicit measures, no bi-directional relationships, display folders assigned, descriptions populated.</td>
              <td>0 implicit measures; 0 bi-directional relationships; 100% measures have descriptions; All columns in display folders</td>
              <td>Tabular Editor BPA, Power BI Modeling MCP Server</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- UNIT TESTING TARGET & RESULTS PATTERN -->
      <div class="grid-card">
        <div class="grid-card-header">
          Unit Testing Pattern ‚Äî Target vs Results
          <span class="badge badge-navy">Design Pattern</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:20%;">Component</th>
              <th style="width:40%;">Description</th>
              <th style="width:40%;">Implementation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Unit Testing Target</strong></td>
              <td>A reference table of expected outcomes. Each row defines a test: ID, description, and the expected (baseline) value. This is the "contract" the model must satisfy.</td>
              <td>Maintained as a standalone table (Excel, SQL, or embedded in the model). Updated whenever the model changes intentionally. Acts as the single source of truth for validation.</td>
            </tr>
            <tr>
              <td><strong>Unit Testing Results<br>(Base vs Target)</strong></td>
              <td>The test execution layer. Runs each test against the current model and compares the result to the target value. Reports PASS/FAIL per test with the actual value returned.</td>
              <td>Implemented as DAX queries (EVALUATE + ROW + UNION pattern) or Fabric Notebooks. Each test returns: Test ID, Test Type, Test Name, Semantic Model Result, Target, PASS/FAIL flag.</td>
            </tr>
            <tr>
              <td><strong>Unit Testing Results<br>(Detail)</strong></td>
              <td>For failed tests, the detail level shows the actual offending rows ‚Äî e.g., which specific records have invalid foreign keys, negative values, or dates outside range.</td>
              <td>A drill-through or filtered query that returns Source, Date, Test ID, and the key columns (UnitID, SegmentID, SalesChannelID, etc.) for each violation, enabling root cause analysis.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- WHEN TO RUN -->
      <div class="grid-card">
        <div class="grid-card-header">
          When to Run Semantic Model Unit Tests
          <span class="badge badge-gold">Test Triggers</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:25%;">Trigger</th>
              <th style="width:35%;">What to Run</th>
              <th style="width:20%;">Frequency</th>
              <th style="width:20%;">Gate / Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>After model change (development)</strong></td>
              <td>All test categories: Structure, Relationships, Data Quality, Measure Accuracy, Totals, Security, Performance, BPA</td>
              <td>Every commit / pull request</td>
              <td>Block deployment to Test/UAT if any test fails. Run in Azure Pipelines or Fabric Notebooks as part of CI/CD.</td>
            </tr>
            <tr>
              <td><strong>After data refresh</strong></td>
              <td>Structure (row counts), Relationships (orphaned keys), Data Quality (NULLs, negatives, date range)</td>
              <td>Every scheduled refresh</td>
              <td>Alert via Power Automate or Teams webhook if tests fail. Optionally prevent report refresh from completing.</td>
            </tr>
            <tr>
              <td><strong>Before promotion (Dev ‚Üí Test ‚Üí Prod)</strong></td>
              <td>Full regression suite: all test categories with production baseline values</td>
              <td>Each deployment pipeline stage</td>
              <td>Deployment pipeline gate: must pass before promotion. Integrated with Azure DevOps release approval.</td>
            </tr>
            <tr>
              <td><strong>Upstream schema change</strong></td>
              <td>Structure (schema shape), Relationships (new orphaned keys), Data Quality (new NULLs or unexpected values)</td>
              <td>Triggered by data engineering team notification or automated schema drift detection</td>
              <td>Block refresh until model is updated to handle the schema change. Notify model owner.</td>
            </tr>
            <tr>
              <td><strong>Periodic governance review</strong></td>
              <td>BPA rules, Security (RLS coverage), Performance benchmarks, documentation completeness</td>
              <td>Monthly or quarterly</td>
              <td>Feed results into Governance Dashboard. Inform CoE review meetings. Track trends over time.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- TOOLS & APPROACHES -->
      <div class="grid-card">
        <div class="grid-card-header">
          Tools for Semantic Model Unit Testing
          <span class="badge badge-info">Tooling Landscape</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:20%;">Tool</th>
              <th style="width:30%;">How It's Used for Testing</th>
              <th style="width:25%;">Strengths</th>
              <th style="width:25%;">Best For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>DAX Query View</strong><br><span style="font-size:0.75em; color:var(--slate);">Power BI Desktop</span></td>
              <td>Write EVALUATE queries to test measure accuracy, row counts, and referential integrity. Queries saved as .dax files alongside the PBIP project.</td>
              <td>Native to Power BI Desktop. No external tools needed. Queries persist with the project file. DAX query tabs are saved in PBIP format.</td>
              <td>Individual developers validating during development. Quick ad-hoc checks.</td>
            </tr>
            <tr>
              <td><strong>DAX Studio</strong><br><span style="font-size:0.75em; color:var(--slate);">External tool</span></td>
              <td>Execute test scripts using EVALUATE + ROW + UNION + ADDCOLUMNS pattern. Compare actual vs expected values. Get Server Timings for performance tests.</td>
              <td>Detailed query plans and timings. Batch execution of test suites. VertiPaq Analyzer for RI violations. Can export results to CSV.</td>
              <td>Performance testing. Detailed RI violation investigation. Test suite development.</td>
            </tr>
            <tr>
              <td><strong>Tabular Editor (BPA)</strong><br><span style="font-size:0.75em; color:var(--slate);">External tool</span></td>
              <td>Run Best Practice Analyzer rules against the model. Detect naming violations, missing descriptions, implicit measures, bi-directional relationships, unused columns.</td>
              <td>Rule-based, customisable. Can be run from command line for automation. Integrates with Azure Pipelines. Community rule sets available.</td>
              <td>BPA checks in CI/CD pipelines. Enforcing modelling standards. Pre-deployment quality gate.</td>
            </tr>
            <tr>
              <td><strong>Fabric Notebooks (Semantic Link)</strong><br><span style="font-size:0.75em; color:var(--slate);">Microsoft Fabric</span></td>
              <td>Programmatically evaluate measures, run DAX queries, test against baselines. Integrates with Great Expectations (GX) for data validation frameworks.</td>
              <td>Python-based ‚Äî full programming flexibility. Can test data quality + measure accuracy + relationships in one notebook. Runs on schedule.</td>
              <td>Automated regression testing. Integration with data engineering pipelines. Post-refresh validation.</td>
            </tr>
            <tr>
              <td><strong>Azure Pipelines</strong><br><span style="font-size:0.75em; color:var(--slate);">Azure DevOps</span></td>
              <td>Execute DAX test scripts as part of CI/CD pipeline. Run Tabular Editor BPA. Gate deployments based on test results. Store .dax test files alongside PBIP project.</td>
              <td>Full CI/CD integration. Automated on pull request. Test results visible in pipeline logs. Integrates with deployment pipelines.</td>
              <td>Enterprise CI/CD workflows. Mandatory pre-deployment gates. Audit trail of test results per release.</td>
            </tr>
            <tr>
              <td><strong>Power Automate</strong><br><span style="font-size:0.75em; color:var(--slate);">Microsoft 365</span></td>
              <td>Run DAX queries against published models via REST API. Compare results to baselines. Trigger alerts (Teams, email) on failure. Can prevent downstream processes.</td>
              <td>No-code/low-code. Triggers on schedule or event. Can block refresh or notify on failure. Accessible to non-developers.</td>
              <td>Post-refresh validation alerts. Lightweight monitoring for self-service teams.</td>
            </tr>

          </tbody>
        </table>
      </div>

      <!-- CI/CD INTEGRATION -->
      <div class="grid-card">
        <div class="grid-card-header">
          Unit Testing in the Deployment Pipeline (CI/CD)
          <span class="badge badge-navy">Enterprise Pattern</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:5%;">Stage</th>
              <th style="width:20%;">Pipeline Stage</th>
              <th style="width:30%;">Tests Executed</th>
              <th style="width:25%;">Gate Criteria</th>
              <th style="width:20%;">Outcome on Failure</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td><strong>Pull Request (Build)</strong></td>
              <td>BPA rules (Tabular Editor CLI). Schema validation. Naming convention checks.</td>
              <td>Zero BPA violations (error level). No implicit measures. No bi-directional relationships.</td>
              <td>PR blocked. Developer must fix before merge.</td>
            </tr>
            <tr>
              <td>2</td>
              <td><strong>Dev Workspace (Validate)</strong></td>
              <td>Deploy to Dev workspace. Run full DAX test suite: Structure, Relationships, Data Quality, Measure Accuracy, Totals.</td>
              <td>All tests PASS. Row counts within ¬±1% of target. All measures within ¬±0.01 of baseline.</td>
              <td>Deployment to Test blocked. Alert to developer with failing test details.</td>
            </tr>
            <tr>
              <td>3</td>
              <td><strong>Test/UAT Workspace</strong></td>
              <td>Full regression suite with production data volumes. Security tests (RLS "View As"). Performance benchmarks (DAX Studio Server Timings).</td>
              <td>All tests PASS. Page load &lt; 3s. No measure &gt; 500ms. RLS filters correctly for all test users.</td>
              <td>Promotion to Prod blocked. Findings routed to CoE for review.</td>
            </tr>
            <tr>
              <td>4</td>
              <td><strong>Production (Post-Deploy)</strong></td>
              <td>Smoke tests: key measures validated against known baselines. Refresh success. Row count sanity check.</td>
              <td>Smoke tests PASS within 15 minutes of deployment. Refresh completes within SLA window.</td>
              <td>Rollback to previous version. Incident raised. Post-incident review scheduled.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- BUSINESS BENEFITS -->
      <div class="grid-card">
        <div class="grid-card-header">
          Business Benefits of Semantic Model Unit Testing
          <span class="badge badge-gold">Value Realisation</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th style="width:25%;">Benefit</th>
              <th style="width:40%;">How It's Achieved</th>
              <th style="width:35%;">Measurable Outcome</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Trust in numbers</strong></td>
              <td>Every measure is validated against known baselines before it reaches production. Totals are verified to match across visuals, exports, and filter contexts.</td>
              <td>Reduction in "the numbers don't match" escalations. Fewer ad-hoc reconciliation requests from finance teams.</td>
            </tr>
            <tr>
              <td><strong>Faster, safer changes</strong></td>
              <td>Regression tests catch unintended side effects of model changes instantly. Developers can refactor with confidence.</td>
              <td>Reduced time-to-deploy for model changes. Fewer production incidents caused by model regression.</td>
            </tr>
            <tr>
              <td><strong>Accelerated adoption</strong></td>
              <td>When users trust the data, they use the platform. Testing proves the model works correctly and builds organisational confidence.</td>
              <td>Higher active user counts. Reduced shadow analytics (Excel workarounds). Increased self-service adoption.</td>
            </tr>
            <tr>
              <td><strong>Regulatory compliance</strong></td>
              <td>Auditable test results provide evidence that data security (RLS), data quality, and calculation accuracy have been verified before production deployment.</td>
              <td>Audit-ready test logs per release. Demonstrable compliance with data governance policies. Reduced audit finding risk.</td>
            </tr>
            <tr>
              <td><strong>CI/CD enablement</strong></td>
              <td>Automated tests are a prerequisite for continuous deployment. Without them, every deployment is a manual risk assessment.</td>
              <td>Fully automated Dev ‚Üí Test ‚Üí Prod pipeline. Deployment frequency increases from monthly to weekly or on-demand.</td>
            </tr>
            <tr>
              <td><strong>Reduced total cost of ownership</strong></td>
              <td>Catching errors at development time costs a fraction of catching them in production. Fewer fire-drills, less rework, less manual validation effort.</td>
              <td>Reduced support hours for data quality issues. Lower incident management costs. Developer time redirected from fixing to building.</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 4: GOVERNANCE FRAMEWORK ‚ïê‚ïê‚ïê -->
    <div id="tab-governance" class="tab-content">

      <div class="pillar-detail-grid">
        <div class="pillar-card">
          <div class="pillar-card-icon" style="background:var(--slate); color:white;">‚öô</div>
          <h3>Processes</h3>
          <p>Processes are the backbone of a good governance strategy that guides users on best practices.</p>
          <ul>
            <li>Workspace naming conventions and creation policies</li>
            <li>Content certification and endorsement workflows</li>
            <li>Deployment pipelines (Dev ‚Üí Test ‚Üí Prod)</li>
            <li>Change management and approval processes</li>
            <li>Data source registration and approval</li>
            <li>Sensitivity labelling classification scheme</li>
          </ul>
        </div>
        <div class="pillar-card">
          <div class="pillar-card-icon" style="background:var(--dark); color:white;">üìñ</div>
          <h3>Training</h3>
          <p>Training ensures users utilise the software correctly and most efficiently.</p>
          <ul>
            <li>Self-service BI best practices and guidelines</li>
            <li>DAX and data modelling standards</li>
            <li>Security awareness (RLS, OLS, sharing)</li>
            <li>Power BI Desktop certification programme</li>
            <li>Centre of Excellence (CoE) mentoring</li>
            <li>On-boarding for new content creators</li>
          </ul>
        </div>
        <div class="pillar-card">
          <div class="pillar-card-icon" style="background:var(--accent); color:white;">üìä</div>
          <h3>Monitoring</h3>
          <p>Monitoring enables you to react to potential problems and plan preventive actions.</p>
          <ul>
            <li>Power BI Admin Portal usage metrics</li>
            <li>Audit logs (Microsoft 365 Unified Audit Log)</li>
            <li>Power BI REST API for automated scanning</li>
            <li>Capacity metrics and performance monitoring</li>
            <li>Inactive content identification and cleanup</li>
            <li>Data refresh failure alerts</li>
          </ul>
        </div>
        <div class="pillar-card">
          <div class="pillar-card-icon" style="background:var(--success); color:white;">üë§</div>
          <h3>Roles</h3>
          <p>Identifying the right roles and filling them with the right people makes governance work efficiently.</p>
          <ul>
            <li>Executive Sponsor ‚Äî strategic direction</li>
            <li>Fabric Administrator ‚Äî tenant management</li>
            <li>Centre of Excellence (CoE) lead</li>
            <li>Data Stewards ‚Äî data quality &amp; classification</li>
            <li>Workspace Admins ‚Äî content ownership</li>
            <li>Content Creators &amp; Viewers ‚Äî defined access</li>
          </ul>
        </div>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Governance Framework ‚Äî Key Tenant Settings to Review
          <span class="badge badge-gold">Tenant Settings</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Tenant Setting Category</th>
              <th>Examples</th>
              <th>Governance Recommendation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Export &amp; Sharing</strong></td>
              <td>Export to Excel, Export to CSV, Share with external users</td>
              <td>Restrict to specific security groups in regulated environments. Consider disabling "Publish to Web" entirely for sensitive data.</td>
            </tr>
            <tr>
              <td><strong>Workspace Creation</strong></td>
              <td>Create workspaces</td>
              <td>Limit workspace creation to CoE members or trained users via a security group to prevent workspace sprawl.</td>
            </tr>
            <tr>
              <td><strong>Content Certification</strong></td>
              <td>Certification, Promoted endorsement</td>
              <td>Define who can certify datasets and reports. Only trained data stewards should certify content.</td>
            </tr>
            <tr>
              <td><strong>Developer Settings</strong></td>
              <td>Allow service principals, Embed content in apps</td>
              <td>Enable only for specific security groups. Service principals should be used for automated CI/CD pipelines.</td>
            </tr>
            <tr>
              <td><strong>Integration</strong></td>
              <td>Use Analyze in Excel, Share to Teams, Push apps to end users</td>
              <td>Enable for the entire organisation where possible to drive adoption, but restrict sensitive content via sensitivity labels.</td>
            </tr>
            <tr>
              <td><strong>Information Protection</strong></td>
              <td>Apply sensitivity labels, Mandatory label policy</td>
              <td>Enforce mandatory labelling for all datasets and reports in regulated industries. Integrate with Microsoft Purview.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Governance Maturity ‚Äî Content Delivery Scopes
          <span class="badge badge-navy">Adoption Roadmap</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Content Scope</th>
              <th>Description</th>
              <th>Typical Governance Level</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Personal BI</strong></td>
              <td>Individual analytics in "My Workspace". Not shared.</td>
              <td>Low ‚Äî personal exploration. Minimal oversight needed.</td>
            </tr>
            <tr>
              <td><strong>Team BI</strong></td>
              <td>Small team collaboration within a shared workspace.</td>
              <td>Medium ‚Äî workspace roles, naming conventions, refresh schedules.</td>
            </tr>
            <tr>
              <td><strong>Departmental BI</strong></td>
              <td>Content distributed via Power BI Apps to a department.</td>
              <td>Medium-High ‚Äî certified datasets, deployment pipelines, RLS.</td>
            </tr>
            <tr>
              <td><strong>Enterprise BI</strong></td>
              <td>Organisation-wide reporting governed by a centralised team.</td>
              <td>High ‚Äî full governance: CI/CD, OLS, sensitivity labels, Purview, audit logs.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 5: MONITORING & LIFECYCLE ‚ïê‚ïê‚ïê -->
    <div id="tab-lifecycle" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Monitoring &amp; Audit Tools
          <span class="badge badge-teal">Monitoring</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Tool / Feature</th>
              <th>What It Does</th>
              <th>Access Required</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Power BI Admin Portal</strong></td>
              <td>Tenant settings, workspace management, usage metrics, capacity health, embed codes, organisational visuals</td>
              <td>Fabric Admin / Power Platform Admin / Global Admin</td>
            </tr>
            <tr>
              <td><strong>Microsoft 365 Unified Audit Log</strong></td>
              <td>Track all user actions: report views, exports, shares, deletions, permission changes. Retained for 90 days (standard) or 1 year (E5).</td>
              <td>Compliance Admin / Security Admin</td>
            </tr>
            <tr>
              <td><strong>Power BI Activity Log (REST API)</strong></td>
              <td>Programmatic access to 30 days of activity events. Commonly used for automated governance dashboards.</td>
              <td>Fabric Admin (or Service Principal with admin consent)</td>
            </tr>
            <tr>
              <td><strong>Capacity Metrics App</strong></td>
              <td>Monitor Premium/Fabric capacity utilisation, throttling, overload events, refresh durations</td>
              <td>Capacity Admin</td>
            </tr>
            <tr>
              <td><strong>Scanner API (Admin API)</strong></td>
              <td>Inventory all workspaces, datasets, reports, users, lineage, sensitivity labels across the tenant</td>
              <td>Fabric Admin (or Service Principal with admin consent)</td>
            </tr>
            <tr>
              <td><strong>Microsoft Purview</strong></td>
              <td>Data lineage across the entire estate. Sensitivity label compliance. Data classification across Azure, Power BI, on-prem.</td>
              <td>Purview Data Reader / Data Curator</td>
            </tr>
            <tr>
              <td><strong>Azure Log Analytics</strong></td>
              <td>Long-term retention and querying of Power BI diagnostic logs (dataset refreshes, queries, errors)</td>
              <td>Azure Contributor + Fabric Admin</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Content Lifecycle Management
          <span class="badge badge-gold">Lifecycle</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Stage</th>
              <th>Activities</th>
              <th>Governance Controls</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Development</strong></td>
              <td>Build semantic models, reports, and dataflows in a Dev workspace</td>
              <td>Use Power BI Desktop with .pbip format for source control. Azure DevOps repos. Branch policies.</td>
            </tr>
            <tr>
              <td><strong>Testing / UAT</strong></td>
              <td>Validate data accuracy, DAX logic, RLS rules, visual behaviour</td>
              <td>Deployment pipeline Test stage. Validation measures. Peer review.</td>
            </tr>
            <tr>
              <td><strong>Production</strong></td>
              <td>Publish to Prod workspace. Distribute via Power BI App.</td>
              <td>Deployment pipeline Prod stage. Certification endorsement. Sensitivity labels applied.</td>
            </tr>
            <tr>
              <td><strong>Maintenance</strong></td>
              <td>Monitor refresh failures, performance, usage metrics. Apply incremental refresh.</td>
              <td>Capacity Metrics App. Alerts for failures. Scheduled reviews.</td>
            </tr>
            <tr>
              <td><strong>Retirement</strong></td>
              <td>Identify inactive or orphaned content. Archive or delete.</td>
              <td>Scanner API to identify unused reports (&gt;90 days no views). Workspace cleanup process.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Key Governance Metrics to Track
          <span class="badge badge-info">KPIs</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Metric</th>
              <th>What It Measures</th>
              <th>Target</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Workspace-to-Admin Ratio</td>
              <td>How many workspaces have at least 2 admins</td>
              <td>100% of active workspaces</td>
            </tr>
            <tr>
              <td>Certified Dataset Adoption</td>
              <td>% of reports connected to certified datasets</td>
              <td>&gt;80% for enterprise BI</td>
            </tr>
            <tr>
              <td>Sensitivity Label Coverage</td>
              <td>% of datasets/reports with a sensitivity label applied</td>
              <td>100% in regulated environments</td>
            </tr>
            <tr>
              <td>Orphaned Content</td>
              <td>Reports/datasets with no views in 90+ days</td>
              <td>&lt;10% of total content</td>
            </tr>
            <tr>
              <td>Refresh Success Rate</td>
              <td>% of scheduled refreshes completing without error</td>
              <td>&gt;98%</td>
            </tr>
            <tr>
              <td>RLS Coverage</td>
              <td>% of shared datasets with RLS rules defined</td>
              <td>100% for datasets with sensitive data</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 6: ENTRA ID & SECURITY GROUPS ‚ïê‚ïê‚ïê -->
    <div id="tab-entra" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Microsoft Entra ID ‚Äî Role in Power BI Governance
          <span class="badge badge-navy">Identity Foundation</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Concept</th>
              <th>Description</th>
              <th>Governance Impact</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Authentication</strong></td>
              <td>All Power BI users authenticate via Microsoft Entra ID (formerly Azure AD). Supports SSO and MFA. User Principal Name (UPN) is mapped to credentials.</td>
              <td>Single identity source for the entire tenant. Enables Conditional Access policies and MFA enforcement.</td>
            </tr>
            <tr>
              <td><strong>Authorisation</strong></td>
              <td>Entra ID admin roles (Global Admin, Fabric Admin, etc.) are assigned here. Workspace roles and app permissions are managed in the Power BI Service.</td>
              <td>Clear separation: tenant-level roles in Entra ID, content-level roles in Power BI Service.</td>
            </tr>
            <tr>
              <td><strong>Service Principals</strong></td>
              <td>Non-human Entra ID app registrations used for automated API access. No MFA required. Recommended for unattended scripts and CI/CD pipelines.</td>
              <td>Eliminates reliance on service accounts. Supports API-based governance automation. Must be enabled via tenant settings.</td>
            </tr>
            <tr>
              <td><strong>Conditional Access</strong></td>
              <td>Entra ID P1/P2 feature. Policies can grant/block access based on user, group, device, location, and risk level.</td>
              <td>Enforce MFA for admin roles. Block access from untrusted devices or locations. Require compliant devices for sensitive workspaces.</td>
            </tr>
            <tr>
              <td><strong>Privileged Identity Management (PIM)</strong></td>
              <td>Entra ID P2 feature. Provides just-in-time, time-limited role activation with approval workflows.</td>
              <td>Recommended for Fabric Admin role. Reduces standing admin privileges. Creates audit trail for role activations.</td>
            </tr>
            <tr>
              <td><strong>B2B Guest Users</strong></td>
              <td>External users invited via Entra ID B2B. Can be assigned workspace roles and item permissions.</td>
              <td>Must be explicitly enabled via tenant settings. Guest users should be assigned Viewer role with RLS enforced.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Security Group Strategy for Power BI
          <span class="badge badge-gold">Best Practice</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Group Type</th>
              <th>Purpose in Power BI</th>
              <th>Example Name</th>
              <th>Managed By</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Entra ID Security Group</strong></td>
              <td>Primary group type for Power BI governance. Used in tenant settings, workspace roles, RLS role assignment, and app audiences.</td>
              <td><code>SG-PBI-Finance-Viewers</code></td>
              <td>IT / Group Owner</td>
            </tr>
            <tr>
              <td><strong>Microsoft 365 Group</strong></td>
              <td>Provides a shared mailbox, calendar, and SharePoint site in addition to group membership. Can be used for workspace roles.</td>
              <td><code>M365-Analytics-Team</code></td>
              <td>Group Owner</td>
            </tr>
            <tr>
              <td><strong>Distribution List</strong></td>
              <td>Can be assigned to workspace roles. Useful when email distribution aligns with access needs.</td>
              <td><code>DL-Sales-Reporting</code></td>
              <td>Exchange Admin</td>
            </tr>
            <tr>
              <td><strong>Mail-Enabled Security Group</strong></td>
              <td>Combines security group functionality with email distribution. Can be used for both access control and notifications.</td>
              <td><code>MSG-PBI-DataStewards</code></td>
              <td>IT / Group Owner</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Recommended Security Groups for Power BI Governance
          <span class="badge badge-teal">Group Naming Convention</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Security Group</th>
              <th>Used In</th>
              <th>Members</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>SG-PBI-FabricAdmins</code></td>
              <td>Entra ID role assignment</td>
              <td>2‚Äì4 trusted admins</td>
              <td>Assigned the Fabric Administrator role. Use PIM for just-in-time activation.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-WorkspaceCreators</code></td>
              <td>Tenant setting: "Create workspaces"</td>
              <td>CoE leads, trained power users</td>
              <td>Controls who can create new workspaces. Prevents workspace sprawl.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-CertificationSMEs</code></td>
              <td>Tenant setting: "Certification"</td>
              <td>Data stewards, CoE members</td>
              <td>Limits who can apply the "Certified" endorsement to datasets and reports.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-ExternalSharing</code></td>
              <td>Tenant setting: "Share with external users"</td>
              <td>Approved content owners</td>
              <td>Restricts external sharing to a controlled group. Essential for regulated environments.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-ServicePrincipals</code></td>
              <td>Tenant setting: "Allow service principals to use APIs"</td>
              <td>App registrations for CI/CD, scanning</td>
              <td>Enables API automation without using personal admin credentials.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-DeploymentPipelines</code></td>
              <td>Tenant setting: "Create deployment pipelines"</td>
              <td>Release managers, DevOps engineers</td>
              <td>Controls who can create and manage Dev ‚Üí Test ‚Üí Prod deployment pipelines.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-ProUsers</code></td>
              <td>Licence assignment (Entra ID)</td>
              <td>All Power BI Pro licence holders</td>
              <td>Group-based licence assignment for automated provisioning and deprovisioning.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-[Workspace]-Viewers</code></td>
              <td>Workspace role: Viewer</td>
              <td>Report consumers for that workspace</td>
              <td>Per-workspace audience groups. RLS is enforced for Viewer role members.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-[Workspace]-Contributors</code></td>
              <td>Workspace role: Contributor</td>
              <td>Content creators for that workspace</td>
              <td>Per-workspace development groups. Can create/edit content but cannot manage access.</td>
            </tr>
            <tr>
              <td><code>SG-PBI-RLS-[RoleName]</code></td>
              <td>RLS role membership (Power BI Service)</td>
              <td>Users assigned to a specific RLS role</td>
              <td>Maps security groups to semantic model RLS roles. Easier to manage than individual users.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Self-Service Group Management ‚Äî Key Decisions
          <span class="badge badge-navy">Governance Decision</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Decision</th>
              <th>Option A: Centralised</th>
              <th>Option B: Decentralised</th>
              <th>Recommendation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Who creates groups?</strong></td>
              <td>IT only. Full control, slower turnaround.</td>
              <td>CoE leads / champions via self-service. Faster, but requires training.</td>
              <td>Hybrid: IT creates tenant-level groups; workspace-level groups delegated to trained owners.</td>
            </tr>
            <tr>
              <td><strong>Who manages membership?</strong></td>
              <td>IT manages all group memberships.</td>
              <td>Designated group owners (e.g., team leads) add/remove members.</td>
              <td>Decentralised with group owners. Microsoft recommends self-service group management with designated owners.</td>
            </tr>
            <tr>
              <td><strong>How are groups audited?</strong></td>
              <td>Manual quarterly review by IT.</td>
              <td>Automated via Microsoft Graph API + access reviews in Entra ID Governance.</td>
              <td>Automated access reviews (Entra ID P2). Flag stale memberships. Quarterly manual review as backup.</td>
            </tr>
            <tr>
              <td><strong>Naming convention?</strong></td>
              <td>Free-form naming by creators.</td>
              <td>Enforced prefix/suffix naming policy in Entra ID.</td>
              <td>Enforce a naming policy: <code>SG-PBI-[Scope]-[Role]</code>. Makes groups discoverable and auditable.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 7: REST API & ADMIN APIs ‚ïê‚ïê‚ïê -->
    <div id="tab-api" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Power BI REST API ‚Äî Overview
          <span class="badge badge-info">API Reference</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>API Category</th>
              <th>Scope</th>
              <th>Key Operations</th>
              <th>Authentication</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Admin APIs</strong></td>
              <td>Tenant-wide (all workspaces)</td>
              <td>Get Activity Events, Get Groups As Admin, Get Datasets As Admin, Get Users As Admin, Get Tenant Settings</td>
              <td>Fabric Admin (delegated) or Service Principal</td>
            </tr>
            <tr>
              <td><strong>Scanner APIs (Workspace Info)</strong></td>
              <td>Tenant-wide (metadata scanning)</td>
              <td>PostWorkspaceInfo, GetScanStatus, GetScanResult ‚Äî returns full inventory including sub-artifact metadata</td>
              <td>Fabric Admin (delegated) or Service Principal</td>
            </tr>
            <tr>
              <td><strong>User APIs</strong></td>
              <td>Current user's workspaces only</td>
              <td>Get Groups, Get Datasets, Get Reports, Get Dashboards, Create Dataset, Refresh Dataset</td>
              <td>Power BI Pro/PPU user (delegated)</td>
            </tr>
            <tr>
              <td><strong>Embedding APIs</strong></td>
              <td>Specific workspace/item</td>
              <td>Generate Token, Embed Reports, Embed Dashboards ‚Äî for custom app embedding</td>
              <td>Service Principal or Master User</td>
            </tr>
            <tr>
              <td><strong>Microsoft Graph</strong></td>
              <td>Entra ID (users &amp; groups)</td>
              <td>Get Users, Get Groups, Get Group Members ‚Äî enriches Power BI audit data with user/department info</td>
              <td>App registration with Graph permissions</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Admin APIs ‚Äî Key Endpoints for Governance
          <span class="badge badge-gold">Governance APIs</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Endpoint</th>
              <th>HTTP Method</th>
              <th>What It Returns</th>
              <th>Rate Limit</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>/admin/activityevents</code></td>
              <td>GET</td>
              <td>User activity log: report views, exports, shares, deletions. 1 day per request. 28 days available. Returns continuation token for pagination.</td>
              <td>200 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/groups</code><span class="info-tip" data-tip="In the Power BI REST API, 'groups' means 'workspaces'. This is a historical naming convention.">?</span></td>
              <td>GET</td>
              <td>All workspaces in the tenant: name, state, capacity, users, datasets, reports. Supports $expand, $filter, $top, $skip.</td>
              <td>50 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/workspaces/getInfo</code></td>
              <td>POST</td>
              <td>Scanner API: triggers a metadata scan for specified workspace IDs. Returns scan ID for polling. Up to 100 workspaces per call.</td>
              <td>500 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/workspaces/scanStatus/{scanId}</code></td>
              <td>GET</td>
              <td>Returns the status of a previously triggered scan (NotStarted, Running, Succeeded, Failed).</td>
              <td>10,000 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/workspaces/scanResult/{scanId}</code></td>
              <td>GET</td>
              <td>Full scan results: workspaces, datasets, reports, dashboards, dataflows, lineage, sensitivity labels, sub-artifact metadata (tables, columns, measures, DAX, M queries).</td>
              <td>500 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/datasets</code></td>
              <td>GET</td>
              <td>All datasets in the tenant: name, configured by, refresh schedule, encryption status.</td>
              <td>200 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/reports</code></td>
              <td>GET</td>
              <td>All reports in the tenant: name, workspace, dataset ID, web URL.</td>
              <td>200 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/capacities</code></td>
              <td>GET</td>
              <td>All capacities: SKU, state, admins, region.</td>
              <td>200 requests/hour</td>
            </tr>
            <tr>
              <td><code>/admin/tenantsettings</code></td>
              <td>GET</td>
              <td>All tenant settings: enabled/disabled state, security group assignments. Useful for automated governance drift detection.</td>
              <td>4 requests/hour</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Tenant Settings Required for API Governance
          <span class="badge badge-teal">Admin Portal ‚Üí Tenant Settings</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Tenant Setting</th>
              <th>Location</th>
              <th>What It Enables</th>
              <th>Recommendation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Allow service principals to use Power BI APIs</strong></td>
              <td>Admin API settings</td>
              <td>Service principals can call Admin REST APIs without a delegated admin token. Eliminates MFA issues for automation.</td>
              <td>Enable for specific security group (<code>SG-PBI-ServicePrincipals</code>). Never enable for entire organisation.</td>
            </tr>
            <tr>
              <td><strong>Allow service principals to use read-only admin APIs</strong></td>
              <td>Admin API settings</td>
              <td>Service principals can call read-only Admin APIs (Scanner, Get Groups, Get Activity Events).</td>
              <td>Enable for specific security group. This is the minimum needed for governance scanning.</td>
            </tr>
            <tr>
              <td><strong>Enhance admin APIs responses with detailed metadata</strong></td>
              <td>Admin API settings</td>
              <td>Turns on model caching. Scanner API responses include table names, column names, measure names, descriptions.</td>
              <td>Enable for specific security group. Required for dataset documentation and data dictionary extraction.</td>
            </tr>
            <tr>
              <td><strong>Enhance admin APIs responses with DAX and mashup expressions</strong></td>
              <td>Admin API settings</td>
              <td>Scanner API responses include DAX measure expressions and Power Query M code. Requires the metadata setting above.</td>
              <td>Enable with caution ‚Äî exposes business logic. Restrict to governance/CoE security group only.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Service Principal Setup ‚Äî Authentication for API Automation
          <span class="badge badge-navy">Setup Checklist</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Step</th>
              <th>Action</th>
              <th>Where</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>1</strong></td>
              <td>Register an App in Entra ID. Note the Application (Client) ID and Directory (Tenant) ID.</td>
              <td>Azure Portal ‚Üí App Registrations</td>
            </tr>
            <tr>
              <td><strong>2</strong></td>
              <td>Create a Client Secret (or certificate). Store securely in Azure Key Vault.</td>
              <td>Azure Portal ‚Üí App ‚Üí Certificates &amp; Secrets</td>
            </tr>
            <tr>
              <td><strong>3</strong></td>
              <td>Create a Security Group and add the Service Principal as a member.</td>
              <td>Entra ID ‚Üí Groups</td>
            </tr>
            <tr>
              <td><strong>4</strong></td>
              <td>Enable tenant settings for service principal access. Assign the security group (not "Entire organisation").</td>
              <td>Fabric Admin Portal ‚Üí Tenant Settings ‚Üí Admin API settings</td>
            </tr>
            <tr>
              <td><strong>5</strong></td>
              <td>Do NOT set any admin-consent-required Power BI permissions on the app registration. Service principals use tenant settings, not API permissions.</td>
              <td>Azure Portal ‚Üí App ‚Üí API Permissions</td>
            </tr>
            <tr>
              <td><strong>6</strong></td>
              <td>Authenticate using Client Credentials flow (OAuth 2.0). Resource: <code>https://analysis.windows.net/powerbi/api</code></td>
              <td>Your automation script (PowerShell, Python, ADF, etc.)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TAB 8: METADATA EXTRACTION PROCESS ‚ïê‚ïê‚ïê -->
    <div id="tab-metadata" class="tab-content">

      <div class="grid-card">
        <div class="grid-card-header">
          Metadata Extraction ‚Äî Why It Matters
          <span class="badge badge-gold">Governance Pillar: Discoverability</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Objective</th>
              <th>What You Extract</th>
              <th>Business Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Tenant Inventory</strong></td>
              <td>All workspaces, datasets, reports, dashboards, dataflows, users, capacities</td>
              <td>Know exactly what exists across the entire tenant. Identify orphaned, duplicated, or unused content.</td>
            </tr>
            <tr>
              <td><strong>Dataset Documentation</strong></td>
              <td>Table names, column names, measures, DAX expressions, M queries, descriptions</td>
              <td>Auto-generated data dictionary. Enables searchable catalogue for the organisation. Eliminates manual documentation.</td>
            </tr>
            <tr>
              <td><strong>Data Lineage</strong></td>
              <td>Data source connections, upstream/downstream dependencies between datasets and reports</td>
              <td>Impact analysis: before changing a data source, know which datasets and reports will be affected.</td>
            </tr>
            <tr>
              <td><strong>Security Audit</strong></td>
              <td>Workspace role assignments, sensitivity labels, endorsement status, RLS configuration</td>
              <td>Compliance reporting. Identify over-shared content, missing labels, workspaces without admins.</td>
            </tr>
            <tr>
              <td><strong>Usage Analytics</strong></td>
              <td>Activity events: report views, exports, shares, refresh events (28 days)</td>
              <td>Adoption metrics. Identify inactive content for cleanup. Track data export patterns for DLP.</td>
            </tr>
            <tr>
              <td><strong>User &amp; Group Enrichment</strong></td>
              <td>Entra ID users, groups, department, job title, manager (via Microsoft Graph)</td>
              <td>Correlate Power BI activity with organisational structure. Build department-level adoption dashboards.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Scanner API ‚Äî Metadata Extraction Flow
          <span class="badge badge-info">Process Design</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Step</th>
              <th>API Call</th>
              <th>Description</th>
              <th>Output</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>1. Get Modified Workspaces</strong></td>
              <td><code>GET /admin/workspaces/modified</code></td>
              <td>Returns workspace IDs modified since a given timestamp. Supports incremental scanning ‚Äî only scan what's changed.</td>
              <td>Array of workspace IDs</td>
            </tr>
            <tr>
              <td><strong>2. Trigger Scan</strong></td>
              <td><code>POST /admin/workspaces/getInfo</code></td>
              <td>Submit up to 100 workspace IDs per call. Set parameters: <code>lineage=true</code>, <code>datasourceDetails=true</code>, <code>datasetSchema=true</code>, <code>datasetExpressions=true</code>.</td>
              <td>Scan ID</td>
            </tr>
            <tr>
              <td><strong>3. Poll Status</strong></td>
              <td><code>GET /admin/workspaces/scanStatus/{scanId}</code></td>
              <td>Poll until status = "Succeeded". Typical scan time: seconds to a few minutes depending on tenant size.</td>
              <td>Status object</td>
            </tr>
            <tr>
              <td><strong>4. Get Results</strong></td>
              <td><code>GET /admin/workspaces/scanResult/{scanId}</code></td>
              <td>Returns the full metadata payload: workspaces, datasets (with tables, columns, measures, DAX, M code), reports, users, lineage, sensitivity labels, endorsement status.</td>
              <td>JSON payload</td>
            </tr>
            <tr>
              <td><strong>5. Store &amp; Historise</strong></td>
              <td>Custom (your pipeline)</td>
              <td>Parse the JSON and load into a data store (Lakehouse, SQL Database, Azure Data Lake). Tag with extraction timestamp for historical comparison.</td>
              <td>Structured tables</td>
            </tr>
            <tr>
              <td><strong>6. Enrich with Graph</strong></td>
              <td><code>GET /users</code> &amp; <code>GET /groups</code> (Microsoft Graph)</td>
              <td>Join user email addresses from Power BI data with Entra ID attributes (department, job title, manager, location).</td>
              <td>Enriched user dimension</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Scanner API ‚Äî What Metadata Is Returned
          <span class="badge badge-teal">Sub-Artifact Detail</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Level</th>
              <th>Metadata Fields</th>
              <th>Requires Enhanced Metadata Setting?</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Workspace</strong></td>
              <td>ID, name, type, state, capacity ID, description</td>
              <td>No</td>
            </tr>
            <tr>
              <td><strong>Dataset</strong></td>
              <td>ID, name, configured by, created date, content provider type, endorsement status, sensitivity label</td>
              <td>No</td>
            </tr>
            <tr>
              <td><strong>Tables</strong></td>
              <td>Name, description, is hidden, source (M partition expression)</td>
              <td><span style="color:var(--warning); font-weight:600;">Yes ‚Äî "Enhance with detailed metadata"</span></td>
            </tr>
            <tr>
              <td><strong>Columns</strong></td>
              <td>Name, data type, description, is hidden, column type (data / calculated)</td>
              <td><span style="color:var(--warning); font-weight:600;">Yes ‚Äî "Enhance with detailed metadata"</span></td>
            </tr>
            <tr>
              <td><strong>Measures</strong></td>
              <td>Name, description, DAX expression</td>
              <td><span style="color:var(--danger); font-weight:600;">Yes ‚Äî "Enhance with DAX and mashup expressions"</span></td>
            </tr>
            <tr>
              <td><strong>M Queries</strong></td>
              <td>Power Query / mashup expression for each table partition</td>
              <td><span style="color:var(--danger); font-weight:600;">Yes ‚Äî "Enhance with DAX and mashup expressions"</span></td>
            </tr>
            <tr>
              <td><strong>Report</strong></td>
              <td>ID, name, dataset ID, web URL, created date, modified date, modified by</td>
              <td>No</td>
            </tr>
            <tr>
              <td><strong>Data Sources</strong></td>
              <td>Data source type, connection string, gateway ID (if applicable)</td>
              <td>No (requires <code>datasourceDetails=true</code> parameter)</td>
            </tr>
            <tr>
              <td><strong>Lineage</strong></td>
              <td>Upstream/downstream dependencies between datasets, dataflows, reports</td>
              <td>No (requires <code>lineage=true</code> parameter)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Recommended Extraction Schedule &amp; Orchestration
          <span class="badge badge-navy">Operational Design</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Data Source</th>
              <th>Frequency</th>
              <th>Orchestration Tool</th>
              <th>Storage Target</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Activity Log</strong> (Admin API)</td>
              <td>Daily (extract previous day). Data available for 28 days only ‚Äî must extract before expiry.</td>
              <td>Azure Data Factory / Fabric Data Pipeline / PowerShell scheduled task</td>
              <td>Lakehouse / Azure SQL / Data Lake (historised)</td>
            </tr>
            <tr>
              <td><strong>Tenant Inventory</strong> (Scanner API)</td>
              <td>Weekly (full scan) + daily (incremental via <code>modifiedSince</code>). Weekly snapshot for point-in-time comparison.</td>
              <td>Azure Data Factory / Fabric Notebook / Power Automate</td>
              <td>Lakehouse / Azure SQL / Data Lake (historised)</td>
            </tr>
            <tr>
              <td><strong>Tenant Settings</strong> (Admin API)</td>
              <td>Daily or weekly. Compare with previous snapshot to detect governance drift.</td>
              <td>Fabric Notebook / PowerShell</td>
              <td>Lakehouse / Azure SQL (with change tracking)</td>
            </tr>
            <tr>
              <td><strong>User &amp; Group Data</strong> (Microsoft Graph)</td>
              <td>Weekly. Enrich activity and inventory data with org structure.</td>
              <td>Azure Data Factory / Fabric Notebook</td>
              <td>Lakehouse / Azure SQL (user dimension table)</td>
            </tr>
            <tr>
              <td><strong>Capacity Metrics</strong></td>
              <td>Ongoing (Capacity Metrics App) + daily snapshot via API if needed.</td>
              <td>Power BI Capacity Metrics App / REST API</td>
              <td>Power BI Dataset (direct) / Lakehouse for historical</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="grid-card">
        <div class="grid-card-header">
          Governance Reporting ‚Äî What to Build from Extracted Metadata
          <span class="badge badge-gold">Reporting Use Cases</span>
        </div>
        <table class="gov-table">
          <thead>
            <tr>
              <th>Report / Dashboard</th>
              <th>Data Sources</th>
              <th>Key Insights</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Tenant Inventory Report</strong></td>
              <td>Scanner API results</td>
              <td>Total workspaces, datasets, reports. Workspace-by-capacity allocation. Orphaned workspaces (no admin). Content by endorsement status.</td>
            </tr>
            <tr>
              <td><strong>Adoption &amp; Usage Dashboard</strong></td>
              <td>Activity Log + Microsoft Graph</td>
              <td>Active users by department, most-viewed reports, export patterns, share events. Trend over time.</td>
            </tr>
            <tr>
              <td><strong>Security &amp; Compliance Report</strong></td>
              <td>Scanner API + Activity Log</td>
              <td>Sensitivity label coverage, RLS-enabled datasets, workspaces shared externally, "Publish to Web" embed codes, access anomalies.</td>
            </tr>
            <tr>
              <td><strong>Data Dictionary / Catalogue</strong></td>
              <td>Scanner API (enhanced metadata + DAX)</td>
              <td>Searchable catalogue of all tables, columns, measures, DAX logic. Self-service discovery for report creators.</td>
            </tr>
            <tr>
              <td><strong>Governance Drift Tracker</strong></td>
              <td>Tenant Settings API (historised)</td>
              <td>Detect when tenant settings change. Alert when critical settings (e.g., "Publish to Web", "Export data") are modified unexpectedly.</td>
            </tr>
            <tr>
              <td><strong>Refresh &amp; Performance Monitor</strong></td>
              <td>Activity Log + Capacity Metrics</td>
              <td>Refresh success/failure rates, duration trends, capacity throttling events, datasets exceeding time limits.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div><!-- /view-governance -->

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- VIEW 2: ENTERPRISE BEST PRACTICES PYRAMID          -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="view-bestpractices" style="display:none;">

      <!-- PYRAMID VISUAL -->
      <div class="grid-card" style="padding:1.5em;">
        <div class="grid-card-header" style="margin-bottom:1em;">
          Power BI Best Practices ‚Äî Layered Pyramid
          <span class="badge badge-gold">By Shrikesh Pattni</span>
        </div>
        <p style="color:var(--slate); font-size:0.88em; margin-bottom:1.2em;">Click any layer to see the best practice checklist for that level. Each layer builds on the one below ‚Äî get the foundations right first.</p>

        <!-- Interactive SVG Pyramid -->
        <div style="max-width:700px; margin:0 auto;">
          <svg viewBox="0 0 700 480" xmlns="http://www.w3.org/2000/svg" style="width:100%; height:auto; cursor:pointer;">
            <!-- Layer 11: Model.BIM (top) -->
            <polygon points="350,10 385,50 315,50" fill="#C4653A" stroke="#A8522E" stroke-width="1.5" onclick="showPyramidLayer('bp-modelbim')" class="pyramid-layer"/>
            <text x="350" y="42" text-anchor="middle" fill="#fff" font-size="9" font-weight="700">Model.BIM</text>

            <!-- Layer 10: Security -->
            <polygon points="315,54 385,54 405,90 295,90" fill="#2D2B28" stroke="#3D3A36" stroke-width="1" onclick="showPyramidLayer('bp-security')" class="pyramid-layer"/>
            <text x="350" y="77" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">Security</text>

            <!-- Layer 9: DMVs -->
            <polygon points="295,94 405,94 430,130 270,130" fill="#3D3A36" stroke="#4A4742" stroke-width="1" onclick="showPyramidLayer('bp-dmvs')" class="pyramid-layer"/>
            <text x="350" y="117" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">DMVs</text>

            <!-- Layer 8: BPA Rules -->
            <polygon points="270,134 430,134 455,170 245,170" fill="#4A4742" stroke="#5A5650" stroke-width="1" onclick="showPyramidLayer('bp-bpa')" class="pyramid-layer"/>
            <text x="350" y="157" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">BPA Rules</text>

            <!-- Layer 7: VertiPaq Engine -->
            <polygon points="245,174 455,174 480,210 220,210" fill="#5A5650" stroke="#6B6560" stroke-width="1" onclick="showPyramidLayer('bp-vertipaq')" class="pyramid-layer"/>
            <text x="350" y="197" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">VertiPaq Engine</text>

            <!-- Layer 6: Visualisation -->
            <polygon points="220,214 480,214 505,250 195,250" fill="#6B6560" stroke="#7A756F" stroke-width="1" onclick="showPyramidLayer('bp-visualisation')" class="pyramid-layer"/>
            <text x="350" y="237" text-anchor="middle" fill="#fff" font-size="10" font-weight="600">Visualisation</text>

            <!-- Layer 5: DAX -->
            <polygon points="195,254 505,254 535,290 165,290" fill="#7A756F" stroke="#8B8580" stroke-width="1" onclick="showPyramidLayer('bp-dax')" class="pyramid-layer"/>
            <text x="350" y="277" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">DAX</text>

            <!-- Layer 4: Data Modelling -->
            <polygon points="165,294 535,294 565,330 135,330" fill="#8B8580" stroke="#9B9590" stroke-width="1" onclick="showPyramidLayer('bp-datamodelling')" class="pyramid-layer"/>
            <text x="350" y="317" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Data Modelling</text>

            <!-- Layer 3: Data Sources & Power Query -->
            <polygon points="135,334 565,334 595,370 105,370" fill="#9B9590" stroke="#ABA5A0" stroke-width="1" onclick="showPyramidLayer('bp-datasources')" class="pyramid-layer"/>
            <text x="350" y="357" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Data Sources &amp; Power Query</text>

            <!-- Layer 2: Pre Development Setup -->
            <polygon points="105,374 595,374 625,410 75,410" fill="#3D3A36" stroke="#4A4742" stroke-width="1" onclick="showPyramidLayer('bp-predev')" class="pyramid-layer"/>
            <text x="350" y="397" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Pre Development Setup</text>

            <!-- Layer 1: Raw Data Structures (base) -->
            <polygon points="75,414 625,414 660,455 40,455" fill="#2D2B28" stroke="#3D3A36" stroke-width="1" onclick="showPyramidLayer('bp-rawdata')" class="pyramid-layer"/>
            <text x="350" y="440" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">Raw Data Structures</text>

            <!-- Arrow labels -->
            <text x="20" y="240" text-anchor="start" fill="#6B6560" font-size="9" transform="rotate(-90, 20, 240)">Foundation ‚Üí Maturity</text>
          </svg>
        </div>
      </div>

      <!-- LAYER DETAIL CARDS (hidden by default, shown on click) -->

      <!-- RAW DATA STRUCTURES -->
      <div id="bp-rawdata" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üìä</span> Layer 1: Raw Data Structures
            <span class="badge badge-navy">Foundation</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>How is the current data formatted ‚Äî <strong>tabular</strong> or <strong>cross-tab</strong>?</td><td>Cross-tab structures must be unpivoted before loading. Tabular is the native format for star schema.</td></tr>
              <tr><td>2</td><td>Do we need to consider <strong>slowly changing dimensions</strong> (SCD)?</td><td>Type 1 (overwrite) vs Type 2 (history) ‚Äî determines how dimension tables are designed and managed.</td></tr>
              <tr><td>3</td><td>SQL ‚Äî do we need <strong>stored procedures</strong> so we only import data from a specific period?</td><td>Reduces data volume at source. Parameterised extraction prevents loading unnecessary historical data.</td></tr>
              <tr><td>4</td><td>Azure Synapse / Fabric ‚Äî can we use the <strong>default serverless architecture</strong> and create Power BI datasets from it?</td><td>Avoids data duplication. Leverages lakehouse patterns for cost-effective analytics at scale.</td></tr>
              <tr><td>5</td><td>What is the thinking on using <strong>composite models</strong> (Azure Analysis Services) IF there is a need?</td><td>Composite models combine Import and DirectQuery. Only use when genuine real-time + historical analysis is required.</td></tr>
              <tr><td>6</td><td>How often is the data getting refreshed? Do we have dimensions we need to create?</td><td>Refresh frequency drives architecture decisions (Import vs DirectQuery vs Direct Lake). Missing dimensions = (Blank) rows.</td></tr>
              <tr><td>7</td><td><strong style="color:var(--danger);">Don't overly complicate this section</strong> ‚Äî keep it simple and do some data exploratory on what you have.</td><td>Understand the data before designing the model. Over-engineering at this stage creates unnecessary complexity downstream.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- PRE DEVELOPMENT SETUP -->
      <div id="bp-predev" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">‚öôÔ∏è</span> Layer 2: Pre Development Setup
            <span class="badge badge-teal">Environment</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Establish <strong>workspace naming conventions</strong> and folder structure before building anything.</td><td>Prevents workspace sprawl. Enables consistent governance as the tenant scales.</td></tr>
              <tr><td>2</td><td>Set up <strong>Dev ‚Üí Test ‚Üí Prod</strong> deployment pipelines.</td><td>Separates development from production. Mandatory for enterprise governance and CI/CD enablement.</td></tr>
              <tr><td>3</td><td>Define <strong>naming standards</strong> for tables, columns, measures, and security groups before development begins.</td><td>Consistency across the organisation. Makes metadata scanning and cataloguing effective.</td></tr>
              <tr><td>4</td><td>Confirm <strong>licensing and capacity</strong> requirements (Pro, PPU, Premium, Fabric).</td><td>Architecture decisions (Import vs Direct Lake, shared vs dedicated capacity) depend on the licensing model.</td></tr>
              <tr><td>5</td><td>Document the <strong>data source connectivity</strong> method: Gateway, VNet, Direct Lake, Cloud-to-Cloud.</td><td>Determines refresh architecture, security boundary, and performance profile.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- DATA SOURCES & POWER QUERY -->
      <div id="bp-datasources" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üîå</span> Layer 3: Data Sources &amp; Power Query
            <span class="badge badge-navy">Ingestion</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td><strong style="color:var(--danger);">Remove unnecessary columns</strong> (not hide) from your data. If you are not reporting on a field, remove the column at source.</td><td>Reduces model size, improves compression, and speeds up refresh. Every column has a memory cost.</td></tr>
              <tr><td>2</td><td><strong style="color:var(--danger);">Try not to use "GROUP BY"</strong> inside Power Query. This can drastically slow down the refresh.</td><td>Group By forces Power Query to buffer the entire table in memory. Push aggregation upstream to SQL.</td></tr>
              <tr><td>3</td><td><strong style="color:var(--danger);">Re-engineer columns with long string IDs</strong> ‚Äî have short strings of ID. Only import short strings.</td><td>Long string keys increase dictionary size and hurt VertiPaq compression. Shorter keys = smaller model.</td></tr>
              <tr><td>4</td><td>If you have multiple queries that are static (don't need to be refreshed), make sure you turn them off inside Power Query.</td><td>Prevents unnecessary refresh cycles for reference/lookup tables that rarely change.</td></tr>
              <tr><td>5</td><td><strong style="color:var(--danger);">Do as much data transformation at source</strong> (SQL) before loading into Power Query ‚Äî this <strong>enables Query Folding</strong>.</td><td>Query Folding pushes transformations to the database engine, which is vastly more efficient than Power Query's in-memory engine.</td></tr>
              <tr><td>6</td><td>If you have big data stored inside Azure Databricks, make sure you have loaded into a Database before loading into Power BI.</td><td>Power BI connecting directly to raw Databricks files is slow and doesn't fold. Stage data into a semantic layer first.</td></tr>
              <tr><td>7</td><td>Use a dedicated <code>[Dates]</code> table and mark as a Date table.</td><td>Enables time intelligence functions. Prevents auto date/time tables from inflating model size.</td></tr>
              <tr><td>8</td><td>Have <strong>we parameterised the data sources</strong> so we don't get user errors?</td><td>Parameters allow seamless switching between Dev/Test/Prod data sources in deployment pipelines.</td></tr>
              <tr><td>9</td><td>Source: Use existing report/dataset before developing new. Reference the source query, and duplicate all others for indexing.</td><td>Reuse prevents data duplication. Referencing a single source query ensures consistency and simplifies maintenance.</td></tr>
              <tr><td>10</td><td>Performance ‚Äî <strong style="color:var(--danger);">Data Volume: Reduce as much as possible</strong>.</td><td>Less data = faster refreshes, smaller model, better user experience. Only import what the report needs.</td></tr>
              <tr><td>11</td><td>Performance ‚Äî <strong style="color:var(--danger);">Query Folding: Enable as much as possible</strong>.</td><td>The single biggest performance lever in Power Query. Check the "View Native Query" option on each step.</td></tr>
              <tr><td>12</td><td>Performance ‚Äî Data Connectivity Mode: Use <strong>Import</strong> if possible.</td><td>Import mode provides the best query performance. DirectQuery adds latency per visual interaction.</td></tr>
              <tr><td>13</td><td><strong>Naming/Data Types</strong> ‚Äî ensure correct types are set explicitly.</td><td>Incorrect data types break relationships, cause implicit conversions, and inflate model size.</td></tr>
              <tr><td>14</td><td>Granularity: Strive to source data at <strong>consistent granularity</strong>.</td><td>Mixed granularity creates many-to-many relationships and complex DAX. Consistent grain = simple star schema.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- DATA MODELLING -->
      <div id="bp-datamodelling" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üèóÔ∏è</span> Layer 4: Data Modelling
            <span class="badge badge-gold">Star Schema</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td><strong style="color:var(--danger);">Star Schema Waterfall</strong> layout: Lookup (dimension) tables above fact tables.</td><td>Visual clarity. Dimensions flow down to facts. Makes the model readable and maintainable at scale.</td></tr>
              <tr><td>2</td><td>Waterfall Layout: Supporting tables at bottom-left (rows).</td><td>Consistent visual organisation allows any developer to understand the model within minutes.</td></tr>
              <tr><td>3</td><td>Use Manage Relationships dialog, use edit relationships dialog.</td><td>The dialog provides visual confirmation of cardinality, cross-filter direction, and active/inactive status.</td></tr>
              <tr><td>4</td><td><strong style="color:var(--danger);">Use 1-to-many relationships / avoid bi-directional</strong> relationships.</td><td>Bi-directional creates ambiguous filter paths, impacts performance, and complicates RLS. Use CROSSFILTER in DAX instead.</td></tr>
              <tr><td>5</td><td><strong style="color:var(--danger);">Use CROSSFILTER or TREATAS</strong> within DAX if bi-directional relations or M-2-M is needed.</td><td>Virtual relationships via DAX are explicit, controlled, and don't create permanent model-wide side effects.</td></tr>
              <tr><td>6</td><td>Use Active and Inactive Relationships / Use Measure Tables.</td><td>Role-playing dimensions (e.g., OrderDate, ShipDate) should use inactive relationships activated with USERELATIONSHIP.</td></tr>
              <tr><td>7</td><td><strong style="color:var(--danger);">Rename linking columns (Key)</strong>.</td><td>Matching column names across tables enables auto-detect relationships and makes the model self-documenting.</td></tr>
              <tr><td>8</td><td>Column Visibility: hide key, sort columns.</td><td>Users only see business-friendly fields. Surrogate keys and sort columns are hidden from the report canvas.</td></tr>
              <tr><td>9</td><td>Normalise your data to reduce data duplication inside your tables.</td><td>Normalisation reduces model size and ensures single source of truth for dimension attributes.</td></tr>
              <tr><td>10</td><td>Only fetch the tables which are required.</td><td>Every unnecessary table adds memory overhead and maintenance burden.</td></tr>
              <tr><td>11</td><td>Avoid relationships on calculated columns and unique identifier columns.</td><td>Calculated columns are computed at refresh time and increase model processing. Use source-level keys instead.</td></tr>
              <tr><td>12</td><td><strong style="color:var(--danger);">Keep the model as narrow and as lean as possible</strong> ‚Äî Power BI works on columnar indexes, hence longer tables are preferred.</td><td>VertiPaq is a columnar engine. Fewer columns = better compression. More rows per column is fine.</td></tr>
              <tr><td>13</td><td><strong style="color:var(--danger);">Try not to always use "Calculated Columns"</strong> ‚Äî use "Calculated Measures" instead as the memory is cache.</td><td>Measures evaluate at query time (no storage cost). Calculated columns materialise at refresh time (permanent storage cost).</td></tr>
              <tr><td>14</td><td>Create a 1-to-Many Relationship. Avoid Many-to-Many. Use Bridge Tables to avoid Many-to-Many.</td><td>Bridge tables resolve M2M without the performance and ambiguity penalties of native M2M relationships.</td></tr>
              <tr><td>15</td><td><strong style="color:var(--danger);">Avoid breaking down "Dates" related information into Month/Quarter/Year</strong> in the same table. Create a Dates Table if needed.</td><td>A dedicated date table with a proper hierarchy is more efficient and enables all time intelligence functions.</td></tr>
              <tr><td>16</td><td>Import vs Direct Query ‚Äî always try and use <strong>Import Mode as the data is saved in memory</strong>.</td><td>Import mode provides orders-of-magnitude faster query performance for interactive analysis.</td></tr>
              <tr><td>17</td><td>Make sure you have thought about <strong>using Aggregation Semantic Models</strong>, for any datasets (mainly for big data).</td><td>Aggregations provide summary-level Import performance with detail-level DirectQuery fallback for very large datasets.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- DAX -->
      <div id="bp-dax" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üîç</span> Layer 5: DAX
            <span class="badge badge-navy">Calculations</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Use <strong>explicit measures</strong> only ‚Äî never rely on implicit aggregation.</td><td>Implicit measures are unpredictable, can't be reused, and don't appear in measure groups or DAX queries.</td></tr>
              <tr><td>2</td><td>Organise measures into <strong>Display Folders</strong> and use a dedicated Measure Table where appropriate.</td><td>A well-organised measure library is discoverable and maintainable. Essential for self-service consumers.</td></tr>
              <tr><td>3</td><td>Use <strong>variables (VAR/RETURN)</strong> to improve readability and avoid repeated calculations.</td><td>Variables are evaluated once and reused. Improves both performance and debuggability.</td></tr>
              <tr><td>4</td><td>Always reference functions listed on <strong>dax.guide</strong> for correct syntax and behaviour.</td><td>dax.guide is the authoritative community reference with examples, gotchas, and performance notes per function.</td></tr>
              <tr><td>5</td><td><strong>Measure twice, cut once</strong>: Validate DAX against known baselines before deploying to production.</td><td>Wrong numbers erode trust faster than any other issue. Test in DAX Query View or DAX Studio before publishing.</td></tr>
              <tr><td>6</td><td>Understand <strong>filter context vs row context</strong> and context transition (CALCULATE).</td><td>The single most important concept in DAX. Misunderstanding context produces silent wrong results.</td></tr>
              <tr><td>7</td><td>Avoid <strong>FILTER(table, ...)</strong> when a simple boolean can be used inside CALCULATE.</td><td>FILTER iterates every row. A boolean predicate inside CALCULATE leverages the storage engine directly.</td></tr>
              <tr><td>8</td><td>Ensure <strong>totals are correct</strong> ‚Äî test grand totals, subtotals, and exported Excel totals independently.</td><td>Totals in Power BI are evaluated independently, not as a sum of visible rows. This catches most DAX errors.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- VISUALISATION -->
      <div id="bp-visualisation" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üìä</span> Layer 6: Visualisation
            <span class="badge badge-teal">Report Design</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Limit visuals per page to <strong>8‚Äì10 maximum</strong>.</td><td>Each visual generates a separate DAX query. More visuals = slower page load. Focus on insight, not density.</td></tr>
              <tr><td>2</td><td>Use <strong>bookmarks and page navigation</strong> instead of cramming everything onto one page.</td><td>Guided navigation improves user experience while keeping each page performant.</td></tr>
              <tr><td>3</td><td>Avoid high-cardinality columns in <strong>slicers</strong> (e.g., transaction IDs, timestamps).</td><td>High-cardinality slicers are slow to render and confusing for users. Use grouped or hierarchical filtering.</td></tr>
              <tr><td>4</td><td>Use <strong>conditional formatting</strong> and data-driven alerts rather than static colour schemes.</td><td>Highlights exceptions automatically. Reduces cognitive load for report consumers.</td></tr>
              <tr><td>5</td><td>Apply <strong>report-level filters</strong> instead of visual-level filters where possible.</td><td>Report-level filters are consistent across all visuals and easier to audit for governance.</td></tr>
              <tr><td>6</td><td>Use <strong>Performance Analyzer</strong> to identify slow visuals before publishing.</td><td>Captures the DAX query generated by each visual. Identifies which visuals to optimise or redesign.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- VERTIPAQ ENGINE -->
      <div id="bp-vertipaq" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">‚ö°</span> Layer 7: VertiPaq Engine
            <span class="badge badge-gold">Performance</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Upload the PBIX into DAX Studio and script out the PBIX files.</td><td>DAX Studio's VertiPaq Analyzer provides a complete breakdown of model size, compression, and encoding per column.</td></tr>
              <tr><td>2</td><td>Does the data model have any <strong style="color:var(--danger);">referential integrity violations</strong>?</td><td>RI violations produce (Blank) rows, confuse users, and prevent "Assume Referential Integrity" optimisation.</td></tr>
              <tr><td>3</td><td>Have we set <strong style="color:var(--danger);">"value encoding" for integers and decimals</strong> data types?</td><td>Value encoding is more efficient than hash encoding for low-cardinality numeric columns. Can halve dictionary size.</td></tr>
              <tr><td>4</td><td>Has the data model been analysed based on <strong style="color:var(--danger);">the Storage Engine context vs Formula Engine</strong> context?</td><td>Storage Engine queries are fast (VertiPaq cache). Formula Engine queries are slow (single-threaded). Minimise FE dependency.</td></tr>
              <tr><td>5</td><td>Which columns have the <strong>highest cardinality</strong> (unique ID) and can these columns be optimised?</td><td>High-cardinality columns are the biggest consumers of memory. Re-engineer or remove where possible.</td></tr>
              <tr><td>6</td><td>What do the <strong style="color:var(--danger);">partition numbers show on the table section</strong>?</td><td>Large tables may benefit from partitioning to enable incremental refresh and reduce processing time.</td></tr>
              <tr><td>7</td><td>Which tables/relationships are <strong style="color:var(--danger);">causing the highest % overload on CPU</strong>?</td><td>Identifies relationships or tables that are disproportionately expensive to process during refresh or query.</td></tr>
              <tr><td>8</td><td>What are <strong>the invalid rows within the tables</strong> (Referential Integrity Violations)?</td><td>Quantifies the scale of RI violations. Feeds into unit testing targets for ongoing monitoring.</td></tr>
              <tr><td>9</td><td><strong style="color:var(--danger);">Analyse the % DB size in relationships</strong> and column sizes.</td><td>Relationship storage overhead should be a small fraction of total model size. Large relationship sizes indicate modelling issues.</td></tr>
              <tr><td>10</td><td>Can we <strong>optimise the data types</strong> ‚Äî whole numbers vs long decimals or even keys?<br><span style="font-size:0.85em; color:var(--slate);">e.g., Transaction ID = 1000-100-01-101 ‚Üí can we turn this to 101?</span></td><td>Shorter, simpler keys compress dramatically better. A 20-character string key vs a 3-digit integer can be a 10x size difference.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- BPA RULES -->
      <div id="bp-bpa" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">‚úÖ</span> Layer 8: BPA Rules
            <span class="badge badge-navy">Quality Gate</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice Rule</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>No <strong>implicit measures</strong> ‚Äî all aggregations must be explicit DAX measures.</td><td>Implicit measures are unpredictable in totals and can't be governed, documented, or reused.</td></tr>
              <tr><td>2</td><td>No <strong>bi-directional relationships</strong> unless explicitly justified and documented.</td><td>Bi-directional creates ambiguity, impacts performance, and complicates RLS.</td></tr>
              <tr><td>3</td><td>All measures have <strong>descriptions</strong>.</td><td>Self-documenting model. Descriptions surface in tooltips, metadata scans, and catalogue tools.</td></tr>
              <tr><td>4</td><td>All columns and measures are in <strong>Display Folders</strong>.</td><td>Organised field lists improve self-service usability and reduce support requests.</td></tr>
              <tr><td>5</td><td>No <strong>unused columns</strong> ‚Äî every column should be referenced by a measure, relationship, or report visual.</td><td>Unused columns consume memory and add maintenance overhead for zero business value.</td></tr>
              <tr><td>6</td><td>Date table is <strong>marked as a Date table</strong> and auto date/time is disabled.</td><td>Auto date/time creates hidden tables that inflate model size. A proper date table gives full control.</td></tr>
              <tr><td>7</td><td>Run BPA via <strong>Tabular Editor CLI</strong> in the CI/CD pipeline.</td><td>Automated enforcement on every pull request. Catches violations before they reach production.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- DMVs -->
      <div id="bp-dmvs" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üîé</span> Layer 9: DMVs (Dynamic Management Views)
            <span class="badge badge-teal">Diagnostics</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Use <strong>DISCOVER_STORAGE_TABLE_COLUMNS</strong> to inspect column encoding and data types at the engine level.</td><td>Reveals whether the VertiPaq engine is using optimal encoding (value vs hash vs run-length).</td></tr>
              <tr><td>2</td><td>Query <strong>MDSCHEMA_MEASURES</strong> to programmatically list all measures, expressions, and display folders.</td><td>Enables automated documentation and cross-model comparison. Feeds into metadata scanning pipelines.</td></tr>
              <tr><td>3</td><td>Use <strong>TMSCHEMA_RELATIONSHIPS</strong> to audit all relationships, cardinality, and cross-filter direction.</td><td>Programmatic relationship auditing at scale. Catches bi-directional and M2M relationships automatically.</td></tr>
              <tr><td>4</td><td>Monitor <strong>TMSCHEMA_PARTITIONS</strong> for refresh status, row counts, and processing times.</td><td>Identifies stale partitions, failed incremental refreshes, and processing bottlenecks.</td></tr>
              <tr><td>5</td><td>Use <strong>DISCOVER_STORAGE_TABLE_COLUMN_SEGMENTS</strong> to find columns with poor compression ratios.</td><td>Poor compression = high memory usage. Identifies candidates for data type optimisation or re-engineering.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- SECURITY -->
      <div id="bp-security" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üîí</span> Layer 10: Security
            <span class="badge badge-gold">Access Control</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Implement <strong>RLS</strong> (Row-Level Security) at the semantic model level.</td><td>Data filtering is enforced by the engine ‚Äî users only see their authorised rows regardless of the report.</td></tr>
              <tr><td>2</td><td>Map <strong>Entra ID Security Groups</strong> to RLS roles ‚Äî never assign individual users.</td><td>Scalable access management. Group membership changes don't require model republishing.</td></tr>
              <tr><td>3</td><td>Test RLS with <strong>"View As"</strong> for every role and with expected + unexpected usernames.</td><td>Dynamic RLS (USERNAME/USERPRINCIPALNAME) must be tested for edge cases to prevent data leakage.</td></tr>
              <tr><td>4</td><td>Use <strong>OLS</strong> (Object-Level Security) to hide sensitive columns from specific roles.</td><td>Even if a user can see rows, OLS prevents access to specific columns (e.g., salary, NI number).</td></tr>
              <tr><td>5</td><td>Apply <strong>Sensitivity Labels</strong> (Microsoft Purview) to datasets and reports.</td><td>Labels travel with the data ‚Äî even when exported to Excel. Enables DLP policies and audit trails.</td></tr>
              <tr><td>6</td><td>Remember: RLS is only enforced for the <strong>Viewer role</strong>. Admin/Member/Contributor bypass RLS.</td><td>Critical governance point. Don't over-assign workspace roles assuming RLS will protect the data.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- MODEL.BIM / VALUE CHAIN -->
      <div id="bp-modelbim" class="bp-detail" style="display:none;">
        <div class="grid-card">
          <div class="grid-card-header">
            <span style="font-size:1.1em;">üèÜ</span> Layer 11: Model.BIM ‚Äî Value Chain
            <span class="badge badge-gold">Strategic Value</span>
          </div>
          <table class="gov-table">
            <thead><tr><th style="width:5%;">#</th><th style="width:55%;">Best Practice / Strategic Question</th><th style="width:40%;">Why It Matters</th></tr></thead>
            <tbody>
              <tr><td>1</td><td>Have we documented the exact <strong>"Data Monetisation Opportunity" (DMO)</strong>?</td><td>Every semantic model should tie back to a measurable business value. Data for data's sake is cost, not value.</td></tr>
              <tr><td>2</td><td>Have we reviewed and valued what the <strong>data asset can generate</strong>?</td><td>Data assets have quantifiable value ‚Äî revenue enablement, cost avoidance, risk reduction, or efficiency gain.</td></tr>
              <tr><td>3</td><td>Have we categorised the data assets into <strong>value-add categories</strong>?</td><td>Different data types generate value differently:</td></tr>
              <tr><td></td><td colspan="2">
                <table style="width:100%; font-size:0.88em; border-collapse:collapse;">
                  <tr style="border-bottom:1px solid var(--border);"><td style="padding:0.3em 0.5em;">Loyalty Programme Appraisals</td><td style="padding:0.3em;">Retail Data Assets</td></tr>
                  <tr style="border-bottom:1px solid var(--border);"><td style="padding:0.3em 0.5em;">Data Services</td><td style="padding:0.3em;">Financial Data</td></tr>
                  <tr style="border-bottom:1px solid var(--border);"><td style="padding:0.3em 0.5em;">Information Exchanges</td><td style="padding:0.3em;">Payment Networks, PayPal</td></tr>
                  <tr style="border-bottom:1px solid var(--border);"><td style="padding:0.3em 0.5em;">Risk-Based Management Pricing</td><td style="padding:0.3em;">Telematics identifying new data streams to inform pricing</td></tr>
                  <tr style="border-bottom:1px solid var(--border);"><td style="padding:0.3em 0.5em;">Intangible Data Assets/Liabilities</td><td style="padding:0.3em;">Airlines &amp; profit maximisation (e.g., MileagePlus)</td></tr>
                  <tr><td style="padding:0.3em 0.5em;">Entertainment</td><td style="padding:0.3em;">Online games ‚Äî information-based goods, services &amp; currency</td></tr>
                </table>
              </td></tr>
              <tr><td>4</td><td><strong>DMO based on 3 aims:</strong></td><td></td></tr>
              <tr><td></td><td style="padding-left:1.5em;">1. <strong>Market value</strong> ‚Äî what is the data worth externally?</td><td>Data as a product. Can the dataset be licensed, syndicated, or sold?</td></tr>
              <tr><td></td><td style="padding-left:1.5em;">2. <strong>Competition value</strong> ‚Äî what competitive advantage does the data provide?</td><td>Data as a differentiator. Unique datasets create moats competitors can't replicate.</td></tr>
              <tr><td></td><td style="padding-left:1.5em;">3. <strong>Internal value</strong> ‚Äî what operational efficiency does the data enable?</td><td>Data as an enabler. Reducing manual processes, improving decision speed, automating compliance.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

    </div><!-- /view-bestpractices -->


    <div id="view-datasources" style="display:none;">

      <div class="ds-layout">

        <!-- DATA SOURCE SIDEBAR -->
        <nav class="ds-sidebar">
          <div class="ds-sidebar-title">Data Sources</div>
          <div class="ds-nav-item active" onclick="switchDsSource('ds-sqlserver')">
            <div class="ds-nav-icon" style="background:#CC2927;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M12 2C8.1 2 5 3.3 5 5v14c0 1.7 3.1 3 7 3s7-1.3 7-3V5c0-1.7-3.1-3-7-3zm0 2c3.3 0 5 1 5 1s-1.7 1-5 1-5-1-5-1 1.7-1 5-1zM7 7.4C8.4 8 10.1 8.3 12 8.3s3.6-.3 5-1v3.4c0 .6-2 1.6-5 1.6s-5-1-5-1.6V7.4zm0 5.3c1.4.7 3.1 1 5 1s3.6-.3 5-1V16c0 .6-2 1.6-5 1.6S7 16.6 7 16v-3.3z"/></svg>
            </div>
            SQL Server (On-Prem)
          </div>
          <div class="ds-nav-item" onclick="switchDsSource('ds-azuresql')">
            <div class="ds-nav-icon" style="background:#0078D4;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M12 2C8.1 2 5 3.3 5 5v14c0 1.7 3.1 3 7 3s7-1.3 7-3V5c0-1.7-3.1-3-7-3zm0 2c3.3 0 5 1 5 1s-1.7 1-5 1-5-1-5-1 1.7-1 5-1z"/><path d="M7 7.4C8.4 8 10.1 8.3 12 8.3s3.6-.3 5-1v3.4c0 .6-2 1.6-5 1.6s-5-1-5-1.6V7.4zm0 5.3c1.4.7 3.1 1 5 1s3.6-.3 5-1V16c0 .6-2 1.6-5 1.6S7 16.6 7 16v-3.3z"/><circle cx="18" cy="6" r="4" fill="#50E6FF"/></svg>
            </div>
            Azure SQL Database
            <span class="ds-nav-coming">SOON</span>
          </div>
          <div class="ds-nav-item" onclick="switchDsSource('ds-lakehouse')">
            <div class="ds-nav-icon" style="background:#117865;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M4 8l8-5 8 5v2l-8 5-8-5V8z" opacity="0.5"/><path d="M4 12l8 5 8-5v2l-8 5-8-5v-2z"/><path d="M4 16l8 5 8-5v-2l-8 5-8-5v2z" opacity="0.7"/></svg>
            </div>
            Fabric Lakehouse
            <span class="ds-nav-coming">SOON</span>
          </div>
          <div class="ds-nav-item" onclick="switchDsSource('ds-databricks')">
            <div class="ds-nav-icon" style="background:#FF3621;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M12 2L3 7.5v2L12 15l9-5.5v-2L12 2z"/><path d="M3 11.5v2L12 19l9-5.5v-2L12 17l-9-5.5z"/><path d="M3 15.5v2L12 23l9-5.5v-2L12 21l-9-5.5z"/></svg>
            </div>
            Databricks
            <span class="ds-nav-coming">SOON</span>
          </div>
          <div class="ds-nav-item" onclick="switchDsSource('ds-excel')">
            <div class="ds-nav-icon" style="background:#217346;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"/><path d="M14 2v6h6" fill="none" stroke="white" stroke-width="1.5"/><text x="10" y="17" text-anchor="middle" font-size="8" font-weight="700" fill="#217346" font-family="Arial">X</text></svg>
            </div>
            Excel / CSV / Flat Files
            <span class="ds-nav-coming">SOON</span>
          </div>
          <div class="ds-nav-divider"></div>
          <div class="ds-nav-item" onclick="switchDsSource('ds-crossref')">
            <div class="ds-nav-icon" style="background:var(--gold);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="#1B2A4A"><rect x="2" y="4" width="8" height="16" rx="1.5" opacity="0.7"/><rect x="14" y="4" width="8" height="16" rx="1.5" opacity="0.7"/><path d="M10 10h4M10 14h4" stroke="#1B2A4A" stroke-width="1.5" stroke-linecap="round"/><path d="M13 8l1.5 2-1.5 2M11 12l-1.5 2 1.5 2" stroke="#1B2A4A" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            </div>
            Cross-Source Comparison
            <span class="ds-nav-coming">SOON</span>
          </div>
        </nav>

        <!-- DATA SOURCE CONTENT AREA -->
        <div class="ds-content-area">

          <!-- ‚ïê‚ïê‚ïê SQL SERVER (ON-PREM) ‚ïê‚ïê‚ïê -->
          <div id="ds-sqlserver" class="ds-source-panel active">

            <!-- Source Header -->
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:#CC2927;"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M12 2C8.1 2 5 3.3 5 5v14c0 1.7 3.1 3 7 3s7-1.3 7-3V5c0-1.7-3.1-3-7-3zm0 2c3.3 0 5 1 5 1s-1.7 1-5 1-5-1-5-1 1.7-1 5-1zM7 7.4C8.4 8 10.1 8.3 12 8.3s3.6-.3 5-1v3.4c0 .6-2 1.6-5 1.6s-5-1-5-1.6V7.4zm0 5.3c1.4.7 3.1 1 5 1s3.6-.3 5-1V16c0 .6-2 1.6-5 1.6S7 16.6 7 16v-3.3z"/></svg></div>
              <div>
                <h2>Microsoft SQL Server (On-Premises)</h2>
                <p>Assessment, engineering preparation, and performance optimisation for connecting SQL Server to Power BI via the On-Premises Data Gateway.</p>
              </div>
              <div class="ds-item-count">
                <div class="num">60</div>
                <div class="lbl">Items</div>
              </div>
            </div>

            <!-- Sub-tabs -->
            <div class="ds-subtabs">
              <button class="ds-subtab active" onclick="switchDsSubtab('ds-sql-assess', this)">
                <span class="ds-subtab-icon">üîç</span> Assessment
              </button>
              <button class="ds-subtab" onclick="switchDsSubtab('ds-sql-engineering', this)">
                <span class="ds-subtab-icon">üîß</span> Engineering
              </button>
              <button class="ds-subtab" onclick="switchDsSubtab('ds-sql-performance', this)">
                <span class="ds-subtab-icon">‚ö°</span> Performance &amp; Connectivity
              </button>
            </div>

            <!-- TAB 1: ASSESSMENT -->
            <div id="ds-sql-assess" class="ds-content-panel active">
              <div class="grid-card">
                <div class="grid-card-header">
                  SQL Server (On-Prem) ‚Äî Assessment Checklist
                  <span class="badge badge-gold">20 Items ¬∑ Ranked by Priority</span>
                </div>
                <table class="gov-table">
                  <thead>
                    <tr>
                      <th style="width:4%;">#</th>
                      <th style="width:28%;">Assessment Area</th>
                      <th style="width:33%;">What to Evaluate</th>
                      <th style="width:20%;">Why It Matters</th>
                      <th style="width:8%;">Priority</th>
                      <th style="width:7%;">Source</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td><strong>Gateway infrastructure</strong></td>
                      <td>Is an on-premises data gateway installed? Is it clustered for high availability? What version is running?</td>
                      <td>Without a gateway, no on-prem data reaches Power BI. A single gateway is a single point of failure. Microsoft only supports the last 6 releases.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-onprem" target="_blank">Gateway Overview</a></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><strong>Data volume &amp; row counts</strong></td>
                      <td>How many rows per table? What is the monthly growth rate? What is the total data size in GB?</td>
                      <td>Determines the Import vs DirectQuery decision. Import models have a 1GB/10GB size limit depending on capacity SKU. Large volumes require partitioning or aggregations.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-deployment-guidance" target="_blank">Gateway Deployment</a></td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td><strong>Import vs DirectQuery decision</strong></td>
                      <td>Does the business require real-time data, or is a scheduled refresh (e.g., every 30 mins or daily) acceptable?</td>
                      <td>Import mode is orders of magnitude faster for interactive analysis. DirectQuery adds latency per visual interaction. Only use DirectQuery when genuine real-time is required.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-dataset-modes-understand" target="_blank">Dataset Modes</a></td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td><strong>Gateway machine sizing</strong></td>
                      <td>CPU cores, RAM, disk I/O, and network bandwidth of the gateway machine. Minimum recommended: 8 cores, 8 GB RAM, wired network.</td>
                      <td>Undersized gateway hardware is the most common cause of refresh timeouts and slow DirectQuery performance. The gateway processes all data transformations that cannot fold to source.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/gateway-onprem-sizing" target="_blank">Gateway Sizing</a></td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td><strong>Schema stability</strong></td>
                      <td>How often do column names, data types, or table structures change? Is there a change management process for the database?</td>
                      <td>Schema drift breaks Power Query refresh. A column rename or type change causes a silent failure in production. Stable schemas enable reliable CI/CD pipelines.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td><strong>Authentication method</strong></td>
                      <td>Windows Authentication, SQL Authentication, or Kerberos SSO? Does the gateway service account have read access to all required databases?</td>
                      <td>Authentication misconfiguration is the top cause of "failed to connect" errors. Kerberos SSO for DirectQuery requires specific Active Directory configuration.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-data-sources" target="_blank">Gateway Data Sources</a></td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td><strong>Network latency</strong></td>
                      <td>What is the latency between the gateway machine, the SQL Server, and the Power BI service? Are they co-located or across WAN links?</td>
                      <td>Microsoft recommends minimising network hops. For Azure VMs, co-locate with the Power BI service region. High latency degrades both refresh and DirectQuery performance.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-deployment-guidance" target="_blank">Gateway Deployment</a></td>
                    </tr>
                    <tr>
                      <td>8</td>
                      <td><strong>Query folding capability</strong></td>
                      <td>Can the Power Query transformations be folded back to SQL Server? Are there steps that break folding (e.g., Group By in M, custom columns)?</td>
                      <td>Query folding is the single biggest performance lever. When folding occurs, SQL Server does the heavy lifting. When it breaks, the gateway processes data in-memory ‚Äî exponentially slower.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/power-query-folding" target="_blank">Query Folding Guidance</a></td>
                    </tr>
                    <tr>
                      <td>9</td>
                      <td><strong>Refresh frequency requirements</strong></td>
                      <td>How often must the data be refreshed? Daily, hourly, every 30 minutes? Is incremental refresh possible?</td>
                      <td>Pro licences support 8 refreshes/day. Premium supports 48. Frequent refreshes without incremental patterns cause full table reloads and capacity exhaustion.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/refresh-data" target="_blank">Data Refresh</a></td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td><strong>Existing views or stored procedures</strong></td>
                      <td>Are there existing SQL Views or stored procedures that serve reporting needs? Can they be reused or adapted for Power BI?</td>
                      <td>Reusing existing database logic avoids duplication and ensures consistency with other reporting tools. Views enable query folding; stored procedures may not.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/native-query-folding" target="_blank">Native Query Folding</a></td>
                    </tr>
                    <tr>
                      <td>11</td>
                      <td><strong>Data sensitivity classification</strong></td>
                      <td>Does the data contain PII, financial data, or other regulated information? What classification level applies?</td>
                      <td>Determines RLS requirements, sensitivity label policies, and whether data can be exported or shared externally. Critical for GDPR and FCA compliance.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning" target="_blank">Security Planning</a></td>
                    </tr>
                    <tr>
                      <td>12</td>
                      <td><strong>Table relationships &amp; keys</strong></td>
                      <td>Are primary keys and foreign keys defined in the database? Are there composite keys that need surrogate key replacements?</td>
                      <td>VertiPaq compresses integer surrogate keys far better than composite or string keys. Missing PKs/FKs lead to referential integrity violations and (Blank) rows in reports.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/star-schema" target="_blank">Star Schema Design</a></td>
                    </tr>
                    <tr>
                      <td>13</td>
                      <td><strong>Cardinality of key columns</strong></td>
                      <td>How many unique values exist in the primary dimension columns? Are there high-cardinality text columns used as keys?</td>
                      <td>High-cardinality columns are the biggest consumers of VertiPaq memory. Re-engineering string keys to integers can reduce model size by 50% or more.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-storage-mode" target="_blank">Storage Mode</a></td>
                    </tr>
                    <tr>
                      <td>14</td>
                      <td><strong>Data quality assessment</strong></td>
                      <td>Are there NULL values, duplicates, or inconsistent formats in key columns? What is the percentage of dirty data?</td>
                      <td>Dirty data propagates into the semantic model and causes (Blank) rows, incorrect totals, and user distrust. Assess before building ‚Äî cheaper to fix at source.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>15</td>
                      <td><strong>Gateway cluster topology</strong></td>
                      <td>If clustered, how many nodes? Are workloads load-balanced? Is there a dedicated gateway for this data source?</td>
                      <td>Gateway clusters provide high availability and load balancing. A dedicated gateway prevents contention with other data sources competing for the same resources.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-install" target="_blank">Gateway Installation</a></td>
                    </tr>
                    <tr>
                      <td>16</td>
                      <td><strong>Concurrent users &amp; query load</strong></td>
                      <td>How many users will query the reports? Are there peak times (e.g., month-end reporting)?</td>
                      <td>For DirectQuery, every visual interaction generates a SQL query via the gateway. High concurrency requires gateway clustering and SQL Server performance tuning.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/gateway-onprem-sizing" target="_blank">Gateway Sizing</a></td>
                    </tr>
                    <tr>
                      <td>17</td>
                      <td><strong>SQL Server version &amp; edition</strong></td>
                      <td>Which SQL Server version (2016, 2019, 2022)? Standard or Enterprise edition? Are there version-specific limitations?</td>
                      <td>Newer versions support better query optimisation features. Enterprise edition supports columnstore indexes which dramatically improve analytical query performance.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-onprem" target="_blank">Gateway Overview</a></td>
                    </tr>
                    <tr>
                      <td>18</td>
                      <td><strong>Firewall &amp; port configuration</strong></td>
                      <td>Are outbound ports 443 (HTTPS) and 80 (HTTP) open? Is Azure Relay connectivity configured?</td>
                      <td>The gateway requires outbound connectivity to Azure Service Bus. Blocked ports cause gateway registration failure and silent refresh timeouts.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-install" target="_blank">Gateway Installation</a></td>
                    </tr>
                    <tr>
                      <td>19</td>
                      <td><strong>Existing reporting landscape</strong></td>
                      <td>What reporting tools currently connect to this SQL Server? SSRS, Excel, Tableau? Are there existing data models to reference?</td>
                      <td>Understanding existing consumers prevents duplication. Existing SSRS reports may contain validated business logic that should be replicated in DAX, not reinvented.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-data-gateways" target="_blank">Gateway Planning</a></td>
                    </tr>
                    <tr>
                      <td>20</td>
                      <td><strong>Backup &amp; disaster recovery</strong></td>
                      <td>Is the gateway recovery key documented and stored securely? Can the gateway be rebuilt quickly if the machine fails?</td>
                      <td>Without the recovery key, a failed gateway requires full reconfiguration of all data source connections. Microsoft recommends storing keys in an organisational password vault.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-data-gateways" target="_blank">Gateway Planning</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- TAB 2: ENGINEERING -->
            <div id="ds-sql-engineering" class="ds-content-panel">
              <div class="grid-card">
                <div class="grid-card-header">
                  SQL Server (On-Prem) ‚Äî Engineering Preparation
                  <span class="badge badge-teal">20 Items ¬∑ Ranked by Priority</span>
                </div>
                <table class="gov-table">
                  <thead>
                    <tr>
                      <th style="width:4%;">#</th>
                      <th style="width:28%;">Practice</th>
                      <th style="width:33%;">Implementation</th>
                      <th style="width:20%;">Why It Matters</th>
                      <th style="width:8%;">Priority</th>
                      <th style="width:7%;">Source</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td><strong>Create dedicated SQL Views for Power BI</strong></td>
                      <td>Build views (e.g., <code>vw_PBI_DimCustomer</code>) that flatten joins, rename columns to business-friendly names, and apply business logic at source.</td>
                      <td>Decouples Power BI from raw schema. Enables full query folding. Source-side schema changes don't break reports ‚Äî only the view needs updating.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/power-query-folding" target="_blank">Query Folding Guidance</a></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><strong>Implement integer surrogate keys on all dimensions</strong></td>
                      <td>Add <code>INT IDENTITY</code> columns as primary keys on dimension tables. Replace composite or string natural keys with single integer keys.</td>
                      <td>VertiPaq compresses integers dramatically better than strings. A 20-character string key vs a 3-digit integer can be a 10x model size difference. Faster relationships.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/star-schema" target="_blank">Star Schema Design</a></td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td><strong>Push all transformations to SQL ‚Äî enable query folding</strong></td>
                      <td>Move GROUP BY, CASE, JOIN, and WHERE logic into SQL Views or stored procedures. Avoid Power Query M-code steps that break folding.</td>
                      <td>Query folding pushes computation to the SQL Server engine, which is vastly more efficient than Power Query's in-memory mashup engine. The single biggest performance lever.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/query-folding-basics" target="_blank">Query Folding Basics</a></td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td><strong>Design star schema at source</strong></td>
                      <td>Structure SQL Views to return clean fact tables (numeric measures + foreign keys) and dimension tables (descriptive attributes). Avoid wide denormalised tables.</td>
                      <td>Star schema is the optimal structure for VertiPaq. Clean separation of facts and dimensions enables predictable filter propagation and correct DAX totals.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/star-schema" target="_blank">Star Schema Design</a></td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td><strong>Remove unnecessary columns at source</strong></td>
                      <td>In SQL Views, only SELECT the columns needed for reporting. Do not <code>SELECT *</code>. Remove audit columns, system fields, and internal IDs not used in reports.</td>
                      <td>Every column has a memory cost in VertiPaq. Removing unused columns reduces model size, improves compression, and speeds up refresh. Remove, don't just hide.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td><strong>Create a dedicated Date dimension</strong></td>
                      <td>Build a <code>DimDate</code> table in SQL with all calendar attributes (Year, Quarter, Month, Week, Day). Mark as Date table in Power BI. Disable auto date/time.</td>
                      <td>Auto date/time creates hidden tables that inflate model size. A proper date table gives full control over time intelligence and enables consistent filtering.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/model-date-tables" target="_blank">Date Tables Guidance</a></td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td><strong>Parameterise data source connections</strong></td>
                      <td>Use Power Query parameters for server name and database name. Create separate parameters for Dev, Test, and Prod environments.</td>
                      <td>Parameters enable seamless switching between environments in deployment pipelines. Eliminates manual connection changes and reduces deployment errors.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/power-query-query-parameters" target="_blank">Query Parameters</a></td>
                    </tr>
                    <tr>
                      <td>8</td>
                      <td><strong>Implement incremental refresh partitioning</strong></td>
                      <td>Add a <code>ModifiedDate</code> or <code>LoadDate</code> column to fact tables. Configure incremental refresh in Power BI to only reload changed/new data.</td>
                      <td>Full table reloads on large fact tables cause refresh timeouts and capacity exhaustion. Incremental refresh reduces data transfer volume by 80-95% on mature tables.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/incremental-refresh-overview" target="_blank">Incremental Refresh</a></td>
                    </tr>
                    <tr>
                      <td>9</td>
                      <td><strong>Add indexes for Power BI query patterns</strong></td>
                      <td>Create non-clustered indexes on columns used in WHERE clauses, JOIN keys, and ORDER BY clauses in your SQL Views.</td>
                      <td>Indexes accelerate data retrieval during refresh and DirectQuery. Without indexes, SQL Server performs full table scans ‚Äî exponentially slower for large tables.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/gateway-onprem-sizing" target="_blank">Gateway Sizing</a></td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td><strong>Set correct data types explicitly in SQL</strong></td>
                      <td>Use <code>INT</code> not <code>BIGINT</code> where values fit. Use <code>DATE</code> not <code>DATETIME</code> where time is irrelevant. Use <code>VARCHAR(50)</code> not <code>VARCHAR(MAX)</code>.</td>
                      <td>Oversized data types waste memory in VertiPaq. Incorrect types cause implicit conversions that break query folding and degrade performance.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>11</td>
                      <td><strong>Pre-aggregate in SQL where possible</strong></td>
                      <td>For very large fact tables (100M+ rows), create summary/aggregate views that pre-compute daily or monthly totals. Use Power BI aggregation tables to combine with detail.</td>
                      <td>Reduces data volume dramatically. A 100M-row transaction table aggregated to daily level might become 500K rows ‚Äî 200x smaller model with the same analytical value.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-aggregations" target="_blank">Aggregations</a></td>
                    </tr>
                    <tr>
                      <td>12</td>
                      <td><strong>Handle slowly changing dimensions (SCD)</strong></td>
                      <td>Implement Type 1 (overwrite) or Type 2 (historical) patterns in SQL. For Type 2, add <code>EffectiveDate</code>, <code>ExpiryDate</code>, and <code>IsCurrent</code> columns.</td>
                      <td>Determines how dimension history is managed. Type 2 SCDs create multiple rows per entity ‚Äî the model must handle this correctly to avoid double-counting.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/star-schema" target="_blank">Star Schema Design</a></td>
                    </tr>
                    <tr>
                      <td>13</td>
                      <td><strong>Create bridge tables for many-to-many relationships</strong></td>
                      <td>When a many-to-many relationship exists (e.g., Student-Course), create an explicit bridge/junction table in SQL with foreign keys to both dimensions.</td>
                      <td>Bridge tables resolve M2M without the performance and ambiguity penalties of native M2M relationships in Power BI. Enables clean 1-to-many star schema patterns.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/star-schema" target="_blank">Star Schema Design</a></td>
                    </tr>
                    <tr>
                      <td>14</td>
                      <td><strong>Use stored procedures for parameterised extraction</strong></td>
                      <td>Create stored procedures that accept date range parameters to extract only the required data window (e.g., last 3 years).</td>
                      <td>Prevents loading unnecessary historical data. Reduces data volume at source. Use <code>Value.NativeQuery</code> with <code>[EnableFolding=true]</code> to maintain query folding.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/native-query-folding" target="_blank">Native Query Folding</a></td>
                    </tr>
                    <tr>
                      <td>15</td>
                      <td><strong>Shorten long string ID columns</strong></td>
                      <td>If transaction IDs are long strings (e.g., <code>TXN-2024-UK-001-REF-45678</code>), create a shorter integer surrogate key. Keep the original as a hidden lookup only if needed.</td>
                      <td>Long string keys increase VertiPaq dictionary size exponentially. Shorter keys = smaller model, better compression, faster relationships.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/import-modeling-data-reduction" target="_blank">Data Reduction Techniques</a></td>
                    </tr>
                    <tr>
                      <td>16</td>
                      <td><strong>Implement referential integrity in the database</strong></td>
                      <td>Add foreign key constraints between fact and dimension tables. Fix orphaned records at source before they reach Power BI.</td>
                      <td>Orphaned foreign keys produce (Blank) rows in visuals. Enforced RI at source enables the "Assume Referential Integrity" optimisation in DirectQuery.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-assume-referential-integrity" target="_blank">Assume RI</a></td>
                    </tr>
                    <tr>
                      <td>17</td>
                      <td><strong>Separate static from dynamic queries</strong></td>
                      <td>Identify which dimension tables rarely change (e.g., Country, Currency). Mark these as "disable load refresh" in Power Query settings.</td>
                      <td>Prevents unnecessary refresh cycles for reference tables that change monthly or less. Reduces total refresh duration and gateway workload.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>18</td>
                      <td><strong>Create a naming convention for SQL objects</strong></td>
                      <td>Use a consistent prefix pattern: <code>vw_PBI_</code> for views, <code>fn_PBI_</code> for functions, <code>usp_PBI_</code> for stored procedures. Document in a central wiki.</td>
                      <td>Consistent naming makes objects discoverable, auditable, and maintainable. DBAs can instantly identify Power BI dependencies during schema changes.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-data-gateways" target="_blank">Gateway Planning</a></td>
                    </tr>
                    <tr>
                      <td>19</td>
                      <td><strong>Document data lineage from source to report</strong></td>
                      <td>Map the full data flow: SQL Table ‚Üí SQL View ‚Üí Power Query ‚Üí Semantic Model ‚Üí Report. Store in a shared location accessible to both DBA and BI teams.</td>
                      <td>Enables impact analysis before any change. When a DBA modifies a table, they can trace which views, models, and reports are affected downstream.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-data-gateways" target="_blank">Gateway Planning</a></td>
                    </tr>
                    <tr>
                      <td>20</td>
                      <td><strong>Create a read-only service account for Power BI</strong></td>
                      <td>Create a dedicated SQL login with <code>db_datareader</code> role only. Do not use personal credentials or sa accounts. Document the account in your gateway registry.</td>
                      <td>Principle of least privilege. Prevents accidental data modification. Simplifies credential management when staff leave. Required for security audits.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-data-sources" target="_blank">Gateway Data Sources</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- TAB 3: PERFORMANCE & CONNECTIVITY -->
            <div id="ds-sql-performance" class="ds-content-panel">
              <div class="grid-card">
                <div class="grid-card-header">
                  SQL Server (On-Prem) ‚Äî Performance &amp; Connectivity
                  <span class="badge badge-navy">20 Items ¬∑ Ranked by Priority</span>
                </div>
                <table class="gov-table">
                  <thead>
                    <tr>
                      <th style="width:4%;">#</th>
                      <th style="width:28%;">Practice</th>
                      <th style="width:33%;">Implementation</th>
                      <th style="width:20%;">Why It Matters</th>
                      <th style="width:8%;">Priority</th>
                      <th style="width:7%;">Source</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td><strong>Use Import mode as the default</strong></td>
                      <td>Select Import mode when configuring the data source. Only switch to DirectQuery if genuine real-time data is a validated business requirement.</td>
                      <td>Import mode provides orders-of-magnitude faster query performance. Data is compressed in VertiPaq and served from memory. DirectQuery adds latency per visual interaction.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-dataset-modes-understand" target="_blank">Dataset Modes</a></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><strong>Validate query folding on every Power Query step</strong></td>
                      <td>Right-click each Applied Step in Power Query ‚Üí check if "View Native Query" is active. If greyed out, that step breaks folding. Reorder or rewrite to maintain folding.</td>
                      <td>Every step that breaks folding forces the gateway to process data in memory. A single broken step can turn a 5-second refresh into a 5-minute one.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/step-folding-indicators" target="_blank">Folding Indicators</a></td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td><strong>Use the native SQL Server connector</strong></td>
                      <td>In Get Data, select "SQL Server" ‚Äî not ODBC, OLE DB, or generic connectors. Enter server and database name explicitly.</td>
                      <td>The native SQL Server connector provides the best query folding support, performance, and feature set. ODBC/OLE DB connectors have limited folding capabilities.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td><strong>Configure incremental refresh correctly</strong></td>
                      <td>Define RangeStart and RangeEnd parameters. Set historical period (e.g., 3 years) and incremental period (e.g., 7 days). Ensure the date column enables query folding.</td>
                      <td>Incremental refresh only works if the date filter folds to source. Without folding, Power BI loads the full table and filters locally ‚Äî defeating the purpose entirely.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/incremental-refresh-overview" target="_blank">Incremental Refresh</a></td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td><strong>Enable "Assume Referential Integrity" for DirectQuery</strong></td>
                      <td>In the relationship properties, tick "Assume referential integrity". This changes LEFT JOINs to INNER JOINs in the generated SQL.</td>
                      <td>INNER JOINs are significantly faster than LEFT JOINs in SQL Server. Only enable when RI is genuinely enforced at source ‚Äî otherwise rows will silently disappear.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-assume-referential-integrity" target="_blank">Assume RI</a></td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td><strong>Filter data early in Power Query</strong></td>
                      <td>Apply row filters (WHERE clauses) as the first Applied Steps ‚Äî before any column transformations. Foldable filters push to source and reduce downstream data volume.</td>
                      <td>Filtering early reduces the data that flows through every subsequent step. Microsoft best practice: filter first, then transform. Order of steps matters for folding.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/best-practices" target="_blank">Power Query Best Practices</a></td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td><strong>Avoid Group By in Power Query ‚Äî push to SQL</strong></td>
                      <td>If you need aggregation, do it in a SQL View (<code>GROUP BY</code> in T-SQL) rather than using Table.Group in Power Query M-code.</td>
                      <td>Group By in Power Query forces the mashup engine to buffer the entire table in memory. The same operation in SQL Server uses optimised execution plans and indexes.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/power-query-folding" target="_blank">Query Folding Guidance</a></td>
                    </tr>
                    <tr>
                      <td>8</td>
                      <td><strong>Use Value.NativeQuery with EnableFolding</strong></td>
                      <td>When using custom SQL in Power Query, wrap it with <code>Value.NativeQuery(Source, "SELECT ...", null, [EnableFolding=true])</code> to maintain folding on subsequent steps.</td>
                      <td>Without <code>[EnableFolding=true]</code>, any Power Query steps after a native query will not fold. This flag explicitly tells Power Query to attempt folding downstream.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/native-query-folding" target="_blank">Native Query Folding</a></td>
                    </tr>
                    <tr>
                      <td>9</td>
                      <td><strong>Co-locate gateway with SQL Server</strong></td>
                      <td>Install the gateway on a machine in the same network segment as the SQL Server. Minimise network hops. Avoid WAN links between gateway and database.</td>
                      <td>Network latency between gateway and SQL Server directly impacts refresh duration and DirectQuery response time. Microsoft recommends minimising distance.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-deployment-guidance" target="_blank">Gateway Deployment</a></td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td><strong>Schedule refreshes during off-peak database hours</strong></td>
                      <td>Align Power BI refresh schedules with periods of low SQL Server activity. Avoid running refreshes during batch processing or month-end reconciliation windows.</td>
                      <td>Competing workloads on SQL Server degrade both the refresh performance and the transactional system. Scheduling avoids resource contention.</td>
                      <td><span class="priority-high">HIGH</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/refresh-data" target="_blank">Data Refresh</a></td>
                    </tr>
                    <tr>
                      <td>11</td>
                      <td><strong>Enable data streaming on the gateway</strong></td>
                      <td>In gateway config, set <code>StreamBeforeRequestCompletes = True</code> in the gateway DLL config file to enable streaming mode.</td>
                      <td>By default, the gateway spools all data before sending to Power BI. Streaming mode sends data as it's retrieved ‚Äî improving performance for large datasets.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-deployment-guidance" target="_blank">Gateway Deployment</a></td>
                    </tr>
                    <tr>
                      <td>12</td>
                      <td><strong>Monitor gateway performance counters</strong></td>
                      <td>Use Windows Performance Monitor to track CPU, memory, and disk I/O on the gateway machine. Set alerts for sustained CPU > 80% or memory > 85%.</td>
                      <td>Proactive monitoring prevents refresh failures. A gateway running at 90%+ CPU will queue refreshes, causing timeouts and cascading failures.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/gateway-onprem-sizing" target="_blank">Gateway Sizing</a></td>
                    </tr>
                    <tr>
                      <td>13</td>
                      <td><strong>Avoid merging queries from different SQL databases</strong></td>
                      <td>If merging data from two SQL databases, do the join in SQL (cross-database query or linked server) rather than merging two Power Query tables.</td>
                      <td>Merging across different data sources in Power Query breaks query folding entirely. Both tables are loaded into memory and joined locally by the mashup engine.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-query/query-folding-basics" target="_blank">Query Folding Basics</a></td>
                    </tr>
                    <tr>
                      <td>14</td>
                      <td><strong>Use query reduction settings for DirectQuery</strong></td>
                      <td>In Power BI Desktop: File ‚Üí Options ‚Üí Query reduction. Enable "Add an Apply button to each slicer" and "Add an Apply button to all basic filters".</td>
                      <td>Without query reduction, every slicer change fires a SQL query through the gateway. With Apply buttons, users build their filter context and fire one query.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-dataset-modes-understand" target="_blank">Dataset Modes</a></td>
                    </tr>
                    <tr>
                      <td>15</td>
                      <td><strong>Limit visuals per page for DirectQuery reports</strong></td>
                      <td>Keep visuals to 8 maximum per page. Each visual generates a separate SQL query. Use bookmarks and drill-through instead of dense pages.</td>
                      <td>10 visuals = 10 simultaneous SQL queries per page load. For DirectQuery, this directly impacts SQL Server and gateway load. Fewer visuals = faster page render.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/gateway-onprem-sizing" target="_blank">Gateway Sizing</a></td>
                    </tr>
                    <tr>
                      <td>16</td>
                      <td><strong>Create columnstore indexes for DirectQuery</strong></td>
                      <td>On large fact tables queried via DirectQuery, create non-clustered columnstore indexes (NCCI) to accelerate analytical queries.</td>
                      <td>Columnstore indexes are optimised for the aggregate/filter patterns Power BI generates. Can improve DirectQuery performance by 10-100x on large tables.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/service-gateway-deployment-guidance" target="_blank">Gateway Deployment</a></td>
                    </tr>
                    <tr>
                      <td>17</td>
                      <td><strong>Use Power BI aggregation tables for dual mode</strong></td>
                      <td>Create summary tables in Import mode paired with detail tables in DirectQuery. Configure aggregation mappings in Power BI Desktop.</td>
                      <td>Aggregations give Import-level performance for common queries while falling back to DirectQuery for detail-level drill-through. Best of both worlds.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-aggregations" target="_blank">Aggregations</a></td>
                    </tr>
                    <tr>
                      <td>18</td>
                      <td><strong>Test refresh duration and set timeout thresholds</strong></td>
                      <td>Measure baseline refresh times. Set pipeline alerts if refresh exceeds 2x baseline. Default gateway timeout is 2 hours ‚Äî adjust if needed.</td>
                      <td>Refresh duration creep is a leading indicator of data growth or query degradation. Without monitoring, timeouts appear as sudden failures rather than gradual degradation.</td>
                      <td><span class="priority-mid">MID</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/connect-data/refresh-data" target="_blank">Data Refresh</a></td>
                    </tr>
                    <tr>
                      <td>19</td>
                      <td><strong>Keep the gateway software updated</strong></td>
                      <td>Update the gateway monthly. Microsoft only supports the last 6 releases. Schedule updates during maintenance windows to avoid refresh interruption.</td>
                      <td>Outdated gateways lose support, miss performance improvements, and may have known bugs. Unsupported versions are the first thing Microsoft checks in support tickets.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/data-integration/gateway/service-gateway-install" target="_blank">Gateway Installation</a></td>
                    </tr>
                    <tr>
                      <td>20</td>
                      <td><strong>Document the gateway-to-source mapping</strong></td>
                      <td>Maintain a register of: gateway cluster ‚Üí data source connections ‚Üí semantic models ‚Üí reports. Store in your centralised portal or governance wiki.</td>
                      <td>Without documentation, a gateway change impacts unknown downstream consumers. Microsoft recommends storing gateway docs in an accessible communication hub.</td>
                      <td><span class="priority-low">LOW</span></td>
                      <td><a class="ds-source-link" href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-data-gateways" target="_blank">Gateway Planning</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div><!-- /ds-sqlserver -->

          <!-- PLACEHOLDER PANELS FOR OTHER SOURCES -->
          <div id="ds-azuresql" class="ds-source-panel">
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:#0078D4;"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M12 2C8.1 2 5 3.3 5 5v14c0 1.7 3.1 3 7 3s7-1.3 7-3V5c0-1.7-3.1-3-7-3zm0 2c3.3 0 5 1 5 1s-1.7 1-5 1-5-1-5-1 1.7-1 5-1z"/><path d="M7 7.4C8.4 8 10.1 8.3 12 8.3s3.6-.3 5-1v3.4c0 .6-2 1.6-5 1.6s-5-1-5-1.6V7.4zm0 5.3c1.4.7 3.1 1 5 1s3.6-.3 5-1V16c0 .6-2 1.6-5 1.6S7 16.6 7 16v-3.3z"/><circle cx="18" cy="6" r="4" fill="#50E6FF"/></svg></div>
              <div>
                <h2>Azure SQL Database</h2>
                <p>Coming in Phase 2 ‚Äî Assessment, engineering preparation, and connectivity best practices for Azure SQL Database with Power BI.</p>
              </div>
            </div>
            <div class="grid-card" style="padding:3rem; text-align:center; color:var(--slate);">
              <p style="font-size:1.1rem; margin-bottom:0.5rem;">üöß Phase 2 ‚Äî Coming Soon</p>
              <p style="font-size:0.82rem;">20 Assessment items ¬∑ 20 Engineering items ¬∑ 20 Performance items</p>
            </div>
          </div>

          <div id="ds-lakehouse" class="ds-source-panel">
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:#117865;"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M4 8l8-5 8 5v2l-8 5-8-5V8z" opacity="0.5"/><path d="M4 12l8 5 8-5v2l-8 5-8-5v-2z"/><path d="M4 16l8 5 8-5v-2l-8 5-8-5v2z" opacity="0.7"/></svg></div>
              <div>
                <h2>Microsoft Fabric Lakehouse</h2>
                <p>Coming in Phase 3 ‚Äî Direct Lake, Delta table design, V-Order, and medallion architecture patterns for Power BI.</p>
              </div>
            </div>
            <div class="grid-card" style="padding:3rem; text-align:center; color:var(--slate);">
              <p style="font-size:1.1rem; margin-bottom:0.5rem;">üöß Phase 3 ‚Äî Coming Soon</p>
              <p style="font-size:0.82rem;">20 Assessment items ¬∑ 20 Engineering items ¬∑ 20 Performance items</p>
            </div>
          </div>

          <div id="ds-databricks" class="ds-source-panel">
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:#FF3621;"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M12 2L3 7.5v2L12 15l9-5.5v-2L12 2z"/><path d="M3 11.5v2L12 19l9-5.5v-2L12 17l-9-5.5z"/><path d="M3 15.5v2L12 23l9-5.5v-2L12 21l-9-5.5z"/></svg></div>
              <div>
                <h2>Databricks</h2>
                <p>Coming in Phase 4 ‚Äî Unity Catalog, cluster configuration, token authentication, and staging patterns for Power BI.</p>
              </div>
            </div>
            <div class="grid-card" style="padding:3rem; text-align:center; color:var(--slate);">
              <p style="font-size:1.1rem; margin-bottom:0.5rem;">üöß Phase 4 ‚Äî Coming Soon</p>
              <p style="font-size:0.82rem;">20 Assessment items ¬∑ 20 Engineering items ¬∑ 20 Performance items</p>
            </div>
          </div>

          <div id="ds-excel" class="ds-source-panel">
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:#217346;"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"/><path d="M14 2v6h6" fill="none" stroke="white" stroke-width="1.5"/><text x="10" y="17" text-anchor="middle" font-size="8" font-weight="700" fill="#217346" font-family="Arial">X</text></svg></div>
              <div>
                <h2>Excel / CSV / Flat Files</h2>
                <p>Coming in Phase 5 ‚Äî Data validation, refresh patterns, and governance controls for file-based data sources.</p>
              </div>
            </div>
            <div class="grid-card" style="padding:3rem; text-align:center; color:var(--slate);">
              <p style="font-size:1.1rem; margin-bottom:0.5rem;">üöß Phase 5 ‚Äî Coming Soon</p>
              <p style="font-size:0.82rem;">20 Assessment items ¬∑ 20 Engineering items ¬∑ 20 Performance items</p>
            </div>
          </div>

          <div id="ds-crossref" class="ds-source-panel">
            <div class="ds-source-header">
              <div class="ds-source-header-icon" style="background:var(--gold);"><svg width="22" height="22" viewBox="0 0 24 24" fill="#1B2A4A"><rect x="2" y="4" width="8" height="16" rx="1.5" opacity="0.7"/><rect x="14" y="4" width="8" height="16" rx="1.5" opacity="0.7"/><path d="M10 10h4M10 14h4" stroke="#1B2A4A" stroke-width="1.5" stroke-linecap="round"/><path d="M13 8l1.5 2-1.5 2M11 12l-1.5 2 1.5 2" stroke="#1B2A4A" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg></div>
              <div>
                <h2>Cross-Source Comparison Matrix</h2>
                <p>Coming in Phase 6 ‚Äî Side-by-side comparison of key topics across all data sources: query folding, surrogate keys, refresh strategy, and more.</p>
              </div>
            </div>
            <div class="grid-card" style="padding:3rem; text-align:center; color:var(--slate);">
              <p style="font-size:1.1rem; margin-bottom:0.5rem;">üöß Phase 6 ‚Äî Coming Soon</p>
              <p style="font-size:0.82rem;">Built after all 5 data sources are complete</p>
            </div>
          </div>

        </div><!-- /ds-content-area -->
      </div><!-- /ds-layout -->
    </div><!-- /view-datasources -->



  </div><!-- /detail-panel -->
</div><!-- /main-container -->

<!-- ‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê -->
<div class="footer">
  <strong>Sources:</strong>
  <a href="https://learn.microsoft.com/en-us/fabric/admin/roles" target="_blank">Fabric Admin Roles</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/collaborate-share/service-roles-new-workspaces" target="_blank">Workspace Roles</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-tenant-administration" target="_blank">Tenant Admin Planning</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-security-tenant-level-planning" target="_blank">Security Planning</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-content-lifecycle-management-validate" target="_blank">Content Validation</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/guidance/fabric-adoption-roadmap-governance" target="_blank">Governance Roadmap</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/fabric/security/service-admin-row-level-security" target="_blank">Row-Level Security</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/rest/api/power-bi/admin" target="_blank">Admin REST API</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/fabric/governance/metadata-scanning-overview" target="_blank">Metadata Scanning</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/fabric/admin/metadata-scanning-setup" target="_blank">Scanner Setup</a> ¬∑
  <a href="https://learn.microsoft.com/en-us/power-bi/guidance/powerbi-implementation-planning-auditing-monitoring-tenant-level-auditing" target="_blank">Tenant Auditing</a>
  <br>
  All content validated against Microsoft Learn official documentation ¬∑ Last reviewed February 2026
</div>

<script>
  // View switching (Governance vs Best Practices)
  function switchView(viewId) {
    document.getElementById('view-governance').style.display = viewId === 'governance' ? 'block' : 'none';
    document.getElementById('view-bestpractices').style.display = viewId === 'bestpractices' ? 'block' : 'none';
    document.getElementById('view-datasources').style.display = viewId === 'datasources' ? 'block' : 'none';
    document.querySelectorAll('.view-toggle').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
  }

  // Pyramid layer click ‚Äî instant show with fade
  function showPyramidLayer(layerId) {
    // Remove active from all pyramid layers
    document.querySelectorAll('.pyramid-layer').forEach(p => p.classList.remove('active'));
    // Highlight the clicked polygon
    if (event && event.target) event.target.classList.add('active');
    // Toggle detail panels using class (avoids layout thrash)
    document.querySelectorAll('.bp-detail').forEach(d => {
      d.classList.remove('visible');
      d.style.display = 'none';
    });
    const el = document.getElementById(layerId);
    if (el) {
      el.style.display = 'block';
      // Force reflow so the animation re-triggers
      void el.offsetWidth;
      el.classList.add('visible');
    }
  }

  // Tab switching
  function activateTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    // Find matching button
    document.querySelectorAll('.tab-btn').forEach(b => {
      if (b.getAttribute('onclick') && b.getAttribute('onclick').includes(tabId)) {
        b.classList.add('active');
      }
    });
  }

  // Layer click highlighting
  function activateLayer(el, tabId) {
    document.querySelectorAll('.nest-layer').forEach(l => l.classList.remove('active'));
    el.classList.add('active');
    activateTab(tabId);
  }


  // Data Source sidebar navigation
  function switchDsSource(sourceId) {
    document.querySelectorAll('.ds-source-panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.ds-nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById(sourceId).classList.add('active');
    event.currentTarget.classList.add('active');
  }

  // Data Source sub-tab switching
  function switchDsSubtab(tabId, btn) {
    var panel = btn.closest('.ds-source-panel');
    panel.querySelectorAll('.ds-content-panel').forEach(p => p.classList.remove('active'));
    panel.querySelectorAll('.ds-subtab').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    btn.classList.add('active');
  }
</script>

</body>
</html>
